{"version":3,"sources":["clipperTheme.js","LaufendeBuchung/useAccountingRecords.js","UIComponents.js","Common/LabeledInput.js","KeyboardControls.js","Common/SelectForm.js","Table/NumberCell.js","Table/index.js","LaufendeBuchung/useBalance.js","Common/EmphasizableInput.js","LaufendeBuchung/TextInput.js","LaufendeBuchung/CurrencyInput.js","Common/DateInput.js","Common/Select.js","useUrlForRead.js","LaufendeBuchung/AccountingRecordForm.js","LaufendeBuchung/index.js","HauptMenue/index.js","Kontenabfrage/index.js","KontenSaldo/index.js","KontenSaldo/Reload.js","Konten/index.js","Guv/index.js","KontenForm/index.js","App.js","serviceWorker.js","index.js"],"names":["blue","clipperTheme","background","font","variable","variableBg","active","activeBg","minor","emphasize","header","indexSelector","r","parseInt","pos","failureAwareFetch","url","opts","fetch","then","ok","Error","statusText","json","useAccountingRecords","deps","useState","Map","accountingRecords","setAccountingRecords","arMessages","setMessages","loading","setLoading","useEffect","a","response","ars","slice","sort","b","reduce","ar","set","fetchAccountingRecords","saveAccountingRecord","accountingRecord","has","method","headers","body","JSON","stringify","msg","title","message","createAr","styled","span","props","theme","Button","button","brightGrey","Emphasize","Hidden","Space","size","Array","from","map","Minorize","UpperCase","p","Screen","div","Content","Scrollable","Hr","hr","Padding","NoWrap","Flex","AutoFlex","FlexCenter","StatusHeader","packageJson","version","right","children","HorSpacer","Centered","Loading","Failed","Style","Input","input","defaultProps","inputBg","Label","label","ValidationText","text","forwardRef","ref","RootButton","SGrid","KeyboardControls","columns","KeyButton","type","submit","onClick","command","symbol","EditFormKeyboardControls","cancel","key","SelectForm","redirect","setRedirect","useKey","detectKeys","to","onSubmit","e","preventDefault","style","width","min","onChange","target","value","newRecordButtonText","ThRightAlign","th","round","raw","parseFloat","Math","toFixed","TdRightAlign","td","TdOrThRightAlign","Suffix","FractionAwarePadding","NumberCell","creditDebitSuffix","suffix","undefined","minus","str","v","amount","toLocaleString","evenOn1stDecimal","DateCell","TypeAwareCell","selector","rest","number","date","TableStyle","table","TrLinkable","tr","link","ThAlignable","alignRight","Table","cellspacing","cellpadding","attributes","att","name","values","onRowClick","keySelector","i","accountingSummary","c","customFooter","summarize","expressive","debit","credit","status","fetchBalance","debitAccount","useBalance","accountPlan","creditAccount","balanceErrored","setError","debitBalance","setDebitBalance","creditBalance","setCreditBalance","sum","fetchData","EmphasizableInput","LabeledInput","validationMsg","InputAlignedRight","step","rows","placeholder","Wrapper","list","id","options","o","useUrlForRead","result","setResult","error","fetchUrl","useAccountPlanAttributes","useAccountPlan","FlexEnd","INVALID_ACCOUNT_MSG","INVALID_DATE_MSG","INVALID_TAX_MSG","TEXT_EMPTY_MSG","INVALID_SUM_MSG","isDate","isNaN","Date","parse","AlignRight","Saldo","AccountingRecordForm","defaultValues","accountPlanOptions","Object","keys","k","konto_nr","name_kont","taxes","useForm","handleSubmit","register","errors","reset","setCreditAccount","setDebitAccount","validTaxOptions","fasuch","readOnly","autoFocus","validate","accountedDate","required","t","fatext","indexOf","tax","toDomString","d","getDate","getMonth","getFullYear","LaufendeBuchung","positionNr","setPositionNrRaw","setPositionNr","recordTemplate","setRecordTemplate","selectMode","editMode","selectPosition","next","defaultDate","get","alert","info","firstAr","useAlert","length","newMessage","success","console","log","siteIndex","2","6","7","9","12","MenuEntry","MenuBlock","start","HauptMenue","site","setSite","onMenuSubmit","toString","createQuery","Kontenabfrage","setFrom","setTo","query","setQuery","accountOverview","aoErrored","apErrored","safeAccountPlan","accountConfig","acErrored","join","kklasse_name","account","KontenSaldo","accountNo","useParams","setAccount","gegen","Reload","param","Konten","loadingAtts","attsErrorerd","atts","accountMap","accountList","no","setAccountNo","selectAccountNo","toLowerCase","Guv","months","ertraege","accumulated","forEach","month","aufwand","aufwendungen","ertrag","gewinn","push","mapTypeToInputType","escUrl","KontenRecordForm","attsRaw","accountValues","App","path","Boolean","window","location","hostname","match","timeout","position","positions","BOTTOM_CENTER","ReactDOM","render","template","AlertTemplate","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c9379e0d.chunk.js","sourcesContent":["const blue = \"rgb(7,1,126)\"\nconst cyan = \"rgb(0,110,107)\"\nconst white = \"white\"\nconst yellow = \"rgb(253,255,0)\"\nconst brightGrey = \"rgb(179,179,179);\"\nconst darkGrey = '#5a5a5a'\n\nconst clipperTheme = {\n    background: blue,\n    font: brightGrey,\n\n    variable: blue,\n    variableBg: cyan,\n\n    active: blue,\n    activeBg: brightGrey,\n\n    minor: darkGrey,\n    emphasize: yellow,\n\n    header: white,\n};\n\nexport default clipperTheme","import { useEffect, useState } from 'react'\n\nexport const indexSelector = r => parseInt(r.pos)\n\nconst failureAwareFetch = (url, opts) => {\n    return fetch(url, opts)\n        .then(r => {\n            if (!r.ok) {\n                throw new Error(r.statusText + ' at ' + r.url)\n            }\n            return r.json()\n        })\n}\nfunction createSuccessMsgObj(msg) {\n    return { title: 'success', message: msg }\n}\n\nfunction useAccountingRecords(deps) {\n    const [accountingRecords, setAccountingRecords] = useState(new Map())\n    const [arMessages, setMessages] = useState([])\n    const [loading, setLoading] = useState(false)\n    useEffect(() => {\n        const fetchAccountingRecords = async () => {\n            setLoading(true)\n            try {\n                const response = await failureAwareFetch('/accounting-records')\n                const ars = response.slice(1)\n                    .sort((a, b) => indexSelector(b) - indexSelector(a))\n                    .reduce((a, ar) => {\n                        a.set(indexSelector(ar), ar)\n                        return a\n                    }, new Map())\n                setLoading(false)\n                setAccountingRecords(ars)\n            } catch (error) {\n                setLoading(false)\n                setMessages([...arMessages, error])\n            }\n        }\n        fetchAccountingRecords()\n    }, [...deps, arMessages])\n\n    function saveAccountingRecord(accountingRecord) {\n        const createAr = async () => {\n            try {\n                const url = accountingRecords.has(indexSelector(accountingRecord)) ? '/update-record' : '/create-record'\n                await failureAwareFetch(url, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ ...accountingRecord })\n                })\n                setMessages([...arMessages, createSuccessMsgObj('Buchung erfolgreich gespeichert')])\n            } catch (error) {\n                setMessages([...arMessages, error])\n            }\n        }\n        createAr()\n    }\n\n    return { accountingRecords, arMessages, saveAccountingRecord, loading }\n}\n\nexport default useAccountingRecords","import React from 'react'\nimport styled from 'styled-components'\nimport packageJson from './package.alias'\n\nexport const Pill = styled.span`\nbackground-color: ${props => props.theme.variableBg};\ncolor: ${props => props.theme.header};`\n\n// TODO: is there a nicer way to copy style from Pill?\nexport const Button = styled.button`\nbackground-color: ${props => props.theme.variableBg};\ncolor: ${props => props.active ? props.theme.header : props.theme.brightGrey};\nborder: 0;\n:hover {\n    color: ${props => props.theme.emphasize}\n}\n:active {\n    color: ${props => props.theme.active}\n}`\n\nexport const Emphasize = styled.span`\n@media not print {\n    color: ${props => props.theme.emphasize}\n}`\n\nconst Hidden = styled.span`visibility:hidden;`\nexport const Space = ({size}) => <Hidden>\n    {Array.from(new Array(size), () => 'x').map(() => 'x')}\n    </Hidden>\n\nexport const Minorize = styled.span`\ncolor: ${props => props.theme.minor}`\n\nexport const UpperCase = styled.p`\ntext-transform: uppercase`\n\nexport const Screen = styled.div`\n@media not print {\n    height: 95vh;\n}\ndisplay: block;\nmax-width: 1000px;\nmargin-left:auto;\nmargin-right:auto;\nmargin-top: 1em;`\n\nexport const Content = styled.div`\nheight: 100%;\ndisplay: flex;\nflex-flow: column;\noverflow:hidden;\n@media not print {border: 1px solid;}`\n\nexport const Scrollable = styled.div`\noverflow:scroll;\npadding:0 20px 0 20px;\nflex-grow : 1;`\n\nexport const Hr = styled.hr`\nmargin:0;\nborder:0.5px solid;`\n\nexport const Padding = styled.div`\npadding: 5px 20px 5px 20px;`\n\nexport const NoWrap = styled.span`white-space:nowrap;`\n\nexport const Flex = styled.div`\ndisplay:flex;\njustify-content: space-between;`\n\nexport const AutoFlex = styled.div`flex: 1 1 auto;`\n\nexport const FlexCenter = styled.div`align-self:center; text-align:center;`\n\nexport function StatusHeader(props) {\n    return <>\n        <Flex>\n            <FlexCenter >FIBU {packageJson.version}</FlexCenter>\n            {props.right && <AutoFlex />}\n            <div {...props}>{props.children}</div>\n            {!props.right && <div />}\n        </Flex>\n        <Hr />\n    </>\n}\n\nexport function HorSpacer() {\n    return <>&nbsp; &nbsp;</>\n}\n\nexport const Centered = styled.div`height: 100%;\ndisplay: flex;\nalign-items: center;\njustify-content: center;`\n\nexport function Loading() {\n    return <Centered><Emphasize>laedt...</Emphasize></Centered>\n}\n\nexport function Failed() {\n    return <Centered><Emphasize>Konnte Daten aufgrund eines Serverfehlers nicht laden</Emphasize></Centered>\n}","import React, { forwardRef } from 'react'\nimport styled from 'styled-components'\n\nimport { Emphasize } from '../UIComponents'\n\nconst Style = styled.span`\nfont-size:smaller;`\nconst NoWrap = styled.span`\nwhite-space: nowrap;`\n\nexport const Input = styled.input`\ncolor: ${props => props.theme.variable};\nbackground-color: ${props => props.theme.variableBg};\nborder: none;\n&:focus {\n    color: ${props => props.theme.active};\n    background-color: ${props => props.theme.activeBg};\n    border:none;\n}`\nInput.defaultProps = {\n    theme: {\n        inputBg: \"white\",\n        input: \"black\"\n    }\n}\nexport const Label = styled.label`\nmargin-right: 7px;`\n\nexport const ValidationText = props => <NoWrap><Emphasize>\n    {'\\u26A0 '}<Style>{props.text}</Style>\n</Emphasize></NoWrap>\n\nfunction LabeledInput(props, ref) {\n    return <><Label><NoWrap>{props.label}</NoWrap>\n    </Label><Input {...props} ref={ref} /></>\n}\nexport default forwardRef(LabeledInput)\n\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Button as RootButton } from './UIComponents'\n\nconst Button = styled(RootButton)`\n  width: 100%;\n  font-size: 1em;\n`\nconst SGrid = styled.div`\n  display: flex;\n  align-content: flex-end;\n  justify-content: space-between;\n  @media print {\n    display: none;\n  }\n`\n\nexport default function KeyboardControls(props) {\n  return <SGrid columns={5}>{props.children}</SGrid>\n}\n\nexport function KeyButton(props) {\n  return (\n    <div>\n      {props.active && (\n        <Button\n          type={props.submit ? 'submit' : 'button'}\n          {...props}\n          onClick={props.command}\n        >\n          {props.symbol && props.symbol}\n          {props.text}\n        </Button>\n      )}\n    </div>\n  )\n}\n\nexport function EditFormKeyboardControls(props) {\n  return (\n    <KeyboardControls>\n      <KeyButton\n        active\n        type=\"reset\"\n        command={props.cancel}\n        key=\"ESC\"\n        text=\"ESC: Abbrechen\"\n      />\n      <KeyButton active text=\"&#8633; : naechstes Feld\" />\n      <KeyButton active text=\"&#8617; : speichern\" type=\"submit\" />\n    </KeyboardControls>\n  )\n}\n","import React, { useState } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport useKey from 'use-key-hook'\n\nimport { Padding, Flex } from '../UIComponents'\n\nimport LabeledInput from '../Common/LabeledInput'\nimport KeyboardControls, { KeyButton } from '../KeyboardControls'\n\nfunction SelectForm(props) {\n    const [redirect, setRedirect] = useState(false)\n    useKey(() => setRedirect(true), { detectKeys: [27] });\n    return redirect ? <Redirect to='/' /> : <form onSubmit={e => {\n        e.preventDefault()\n        props.onSubmit()\n    }} >\n        <Padding>\n            <Flex >\n                <div><LabeledInput\n                    {...props}\n                    type='number'\n                    style={{ width: '50px' }}\n                    min='1'\n                    onChange={e => props.onChange(e.target.value)}\n                /></div>\n            </Flex>\n        </Padding>\n        <KeyboardControls>\n            <KeyButton\n                active\n                text='ESC: Hauptmenue'\n                command={() => setRedirect(true)}\n            />\n            <KeyButton\n                active\n                text={' : ' + props.newRecordButtonText}\n                symbol='&#8617;'\n                command={() => props.onSubmit()}\n            />\n        </KeyboardControls>\n    </form>\n}\n\nexport default SelectForm","import React from 'react'\nimport styled from 'styled-components'\n\nconst ThRightAlign = styled.th`text-align:right;`\n\nconst amount = v => v < 0 ? -v : v\nexport const formatCurrency = n => new Intl.NumberFormat().format(round(n))\n\nconst isZero = v => round(v) === round(0)\nconst round = raw => raw && parseFloat(Math.round(raw * 100) / 100).toFixed(2);\nconst evenOn1stDecimal = v => (((v * 10) % 1) === 0 && v % 1 !== 0)\n\nconst TdRightAlign = styled.td`text-align:right;`\nconst TdOrThRightAlign = props => props.th ?\n    <ThRightAlign {...props} />\n    : <TdRightAlign {...props} />\n\nconst Suffix = ({ children }) => <>&nbsp;{children}</>\n\nconst FractionAwarePadding = styled.span`${({ value }) => ((value % 1) === 0) && 'padding-right: 1.85em;'}`\n\nexport const NumberCell = ({ children, th, creditDebitSuffix, suffix }) => {\n    const value = children\n    if (value === undefined)\n        return <TdOrThRightAlign th={th} />\n    if (isZero(value))\n        return <TdOrThRightAlign th={th}>0{(creditDebitSuffix || suffix) && <>&nbsp;&nbsp;</>}</TdOrThRightAlign>\n\n    const minus = (value < 0)\n    const str = (creditDebitSuffix ? amount(value) : value).toLocaleString()\n    return <TdOrThRightAlign th={th}>\n        {value && <><FractionAwarePadding value={value}>\n            {evenOn1stDecimal(value) ? str + '0' : str}\n        </FractionAwarePadding>\n            {suffix && <Suffix>{suffix}</Suffix>}\n            {creditDebitSuffix && <Suffix>{minus ? 'S' : 'H'}</Suffix>}\n        </>}\n    </TdOrThRightAlign>\n}\n\nexport default NumberCell","import React from 'react'\nimport styled from 'styled-components'\n\nimport NumberCell from './NumberCell'\n\nconst DateCell = styled.td`white-space: nowrap;`\nconst TypeAwareCell = props => {\n    const { selector, ...rest } = props\n    if (props.number)\n        return <NumberCell {...rest} />\n    if (props.date)\n        return <DateCell {...rest} />\n    return <td {...rest} />\n}\n\nconst TableStyle = styled.table`\n  width: 100%;\n  border-collapse:collapse;\n  @media print {\n      td {\n        border-bottom: 1px dotted;\n      }\n  }\n  th, td {\n    margin: 0;\n    padding: 3px 5px 3px 3px;\n  }\n  tr:nth-child(even) {\n      background-color: #06025e;\n  }\n  thead th {\n    border-bottom: 1px solid;\n  }\n  tfoot th {\n    border-top: 1px solid;\n  }`\nconst TrLinkable = styled.tr`\n${props => props.link && `\ncursor:pointer;\n&:hover {\n    background-color:`+ props.theme.variableBg + ` !important;\n    color:`+ props.theme.active + `;\n}\n`}`\n\nconst ThAlignable = styled.th`\n    text-align:${({ alignRight }) => alignRight ? 'right' : 'left'};`\n\nfunction Table(props) {\n    return <TableStyle cellspacing=\"0\" cellpadding=\"0\">\n        <thead>\n            <tr>\n                {props.attributes.map(att => <ThAlignable\n                    alignRight={att.number}\n                    number={att.number}\n                    key={att.name}>{att.name}\n                </ThAlignable>)}\n            </tr>\n        </thead>\n        <tbody>\n            {props.values && props.values.map(r =>\n                <TrLinkable\n                    link={props.onRowClick}\n                    onClick={() => props.onRowClick && props.onRowClick(r)}\n                    key={props.keySelector(r)}\n                >\n                    {props.attributes.map((att, i) => <TypeAwareCell\n                        {...att}\n                        key={i}>\n                        {att.selector(r)}\n                    </TypeAwareCell>)}\n                </TrLinkable>\n            )}\n        </tbody>\n        {(props.accountingSummary && props.values) && <tfoot><tr>\n            {props.attributes.map(c => {\n                const key = c.name\n                if (c.customFooter)\n                    return <NumberCell th creditDebitSuffix key={key}>\n                        {c.customFooter}\n                    </NumberCell>\n                if (c.summarize)\n                    return <NumberCell th suffix={c.summarize} key={key}>\n                        {props.values.reduce((a, r) => a + c.selector(r), 0)}\n                    </NumberCell>\n                if (c.expressive)\n                    return <NumberCell th creditDebitSuffix>\n                        {props.values.reduce((a, r) => a + r.debit - r.credit, 0)}\n                    </NumberCell>\n                return <NumberCell th key={key} />\n            })}\n        </tr></tfoot>\n        }\n        {props.children}\n    </TableStyle >\n}\nexport default Table","import { useEffect, useState } from 'react'\n\nconst failureAwareFetch = (url, opts) => {\n    return fetch(url, opts)\n        .then(r => {\n            if (!r.ok) {\n                throw new Error({\n                    ...r,\n                    name: r.status,\n                    status: r.status,\n                    message: r.statusText,\n                    url: r.url\n                })\n            }\n            return r.json()\n        })\n}\nconst fetchBalance = async (debitAccount) => {\n    return await failureAwareFetch('/balance?accountNo=' + debitAccount)\n}\n\nconst useBalance = ({ accountPlan, debitAccount, creditAccount }) => {\n    const [balanceErrored, setError] = useState(false)\n    const [debitBalance, setDebitBalance] = useState()\n    const [creditBalance, setCreditBalance] = useState()\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                if (accountPlan[debitAccount]) {\n                    const r = await fetchBalance(debitAccount)\n                    setDebitBalance(r.sum)\n                } else setDebitBalance(undefined)\n                if (accountPlan[creditAccount]) {\n                    const r = await fetchBalance(creditAccount)\n                    setCreditBalance(r.sum)\n                } else setCreditBalance(undefined)\n            } catch (error) {\n                setError(true)\n            }\n        }\n        fetchData()\n\n    }, [accountPlan, debitAccount, creditAccount])\n\n    return [{ creditBalance, debitBalance }, balanceErrored]\n}\n\nexport default useBalance","import styled from 'styled-components'\nimport LabeledInput from './LabeledInput'\n\nconst EmphasizableInput = styled(LabeledInput)`\n${props => props.emphasize && 'background-color:' + props.theme.emphasize + ';'}`\n\nexport default EmphasizableInput","import React, { forwardRef } from 'react'\nimport { ValidationText } from '../Common/LabeledInput'\nimport EmphasizableInput from '../Common/EmphasizableInput'\n\nfunction TextInput(props, ref) {\n    return <>\n        <EmphasizableInput {...props}\n            ref={ref} emphasize={props.validationMsg} />\n        {props.validationMsg && <ValidationText\n            text={props.validationMsg.message}\n        />}\n    </>\n}\n\nexport default forwardRef(TextInput)\n","import React, { forwardRef } from 'react'\nimport styled from 'styled-components'\nimport EmphasizableInput from '../Common/EmphasizableInput'\n\nconst InputAlignedRight = styled(EmphasizableInput)`\ntext-align:right;`\n\nfunction CurrencyInput(props, ref) {\n\n    return <InputAlignedRight\n        {...props}\n        emphasize={props.validationMsg}\n        ref={ref}\n        type='number'\n        step='any' />\n}\nexport default forwardRef(CurrencyInput);","import React, { forwardRef } from 'react'\nimport { ValidationText } from './LabeledInput'\nimport EmphasizableInput from './EmphasizableInput'\n\nfunction DateInput(props, ref) {\n\n    return <><EmphasizableInput\n        rows={1}\n        {...props}\n        emphasize={props.validationMsg}\n        ref={ref}\n        placeholder='dd.mm.yyyy'\n        value={props.value}\n        type='date'\n    />\n        {props.validationMsg && <ValidationText\n            text={props.validationMsg.message}\n        />}\n    </>\n}\nexport default forwardRef(DateInput);","import React, { forwardRef } from 'react'\nimport { ValidationText } from './LabeledInput'\nimport EmphasizableInput from './EmphasizableInput'\nimport styled from 'styled-components'\n\nconst Wrapper = styled.span`margin-left: 5px;`\n\nfunction Select(props, ref) {\n\n    return <>\n        <EmphasizableInput size={7}\n            {...props}\n            emphasize={props.validationMsg}\n            ref={ref}\n            list={props.name}\n        />\n        <datalist id={props.name}>\n            {props.options.map(o => <option\n                key={o.value}\n                value={o.value} >\n                {o.value} - {o.name}\n            </option>)}\n        </datalist>\n        {props.validationMsg && <Wrapper><ValidationText\n            text={props.validationMsg.message}\n        /></Wrapper>}\n    </>\n}\n\nexport default forwardRef(Select)","import { useEffect, useState } from 'react'\n\nfunction useUrlForRead(url) {\n    const [result, setResult] = useState()\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState()\n    useEffect(() => {\n        setLoading(true)\n        const fetchUrl = async () => {\n            try {\n                const response = await fetch(url)\n                    .then(r => {\n                        if (!r.ok) {\n                            throw new Error(r.statusText + ' at ' + r.url)\n                        }\n                        return r.json()\n                    })\n                setLoading(false)\n                setResult(response)\n            } catch (error) {\n                setLoading(false)\n                setError(error)\n            }\n        }\n        fetchUrl()\n    }, [url])\n    return { result, error, loading }\n}\n\nexport const useAccountPlanAttributes = () => useUrlForRead('/account-plan-meta')\nexport const useAccountPlan = () => useUrlForRead('/account-plan')\n\nexport default useUrlForRead","import React, { useState, useEffect } from 'react'\nimport useForm from \"react-hook-form\";\nimport { EditFormKeyboardControls } from '../KeyboardControls'\nimport { Padding, Emphasize, HorSpacer, Loading } from '../UIComponents'\nimport styled from 'styled-components'\n\nimport useBalance from './useBalance'\n\nimport LabeledInput from '../Common/LabeledInput'\nimport TextInput from './TextInput'\nimport CurrencyInput from './CurrencyInput'\nimport DateInput from '../Common/DateInput'\nimport Select from '../Common/Select'\nimport useUrlForRead from '../useUrlForRead';\n\nconst Flex = styled.div`\ndisplay:flex;\njustify-content: space-between;`\nconst FlexEnd = styled.div`\ndisplay:flex;\njustify-content: flex-start;`\n\nconst INVALID_ACCOUNT_MSG = 'Konto ex. nicht'\nconst INVALID_DATE_MSG = 'Datum ex. nicht'\nconst INVALID_TAX_MSG = 'Steuerschl. ex. nicht'\nconst TEXT_EMPTY_MSG = 'Keinen Text eingegeben'\nconst INVALID_SUM_MSG = 'Keinen Betrag eingegeben'\n\nconst isDate = v => isNaN(Date.parse(v))\n\nconst AlignRight = styled.div`text-align:right;`\nconst NoWrap = styled.span`white-space: nowrap;`\nconst Saldo = ({ value }) => <>Saldo <NoWrap>{(value < 0 ? -value : value).toLocaleString()} {value < 0 ? 'S' : 'H'} </NoWrap></>\n\nfunction AccountingRecordForm({defaultValues, onSubmit, pos, cancel}) {\n\n    const { result: accountPlan, loading, error } = useUrlForRead('/account-plan')\n    const accountPlanOptions = Object.keys((accountPlan || {}))\n        .map(k => {\n            return {\n                value: accountPlan[k].konto_nr,\n                name: accountPlan[k].name_kont\n            }\n        })\n    const { result: taxesRaw /* find way to combine errors */ } = useUrlForRead('/taxes')\n    const taxes = (taxesRaw || [])\n    const { handleSubmit, register, errors, reset } = useForm({\n        defaultValues: defaultValues\n    });\n\n    useEffect(() => reset(defaultValues), [defaultValues, reset])\n\n    const [creditAccount, setCreditAccount] = useState()\n    const [debitAccount, setDebitAccount] = useState()\n    const [{ creditBalance, debitBalance }] = useBalance({ accountPlan, debitAccount, creditAccount })\n\n    const validTaxOptions = taxes.map(v => v.fasuch)\n\n    /* The loading condition ensures that the select input is rendered only when the app already received 'accountPlan' prop from api-call. The 'register' fn from 'react-form-hook'-lib takes args from 1st render only. As result the args are not updated, when accountPlan or taxes are loaded :/ */\n    // TODO: reproduce in Codesandbox and report lib-owner\n    if (error) return <p>Konnte Buchungsplan nicht vom Server laden.</p>\n    return loading ? <Loading /> : <form\n        onSubmit={handleSubmit(onSubmit)} >\n        <Padding>\n            <Flex>\n                <div><LabeledInput\n                    name='pos'\n                    label='Pos.'\n                    size={6}\n                    readOnly={true}\n                    value={pos}\n                    ref={register}\n                /></div>\n\n                <div><DateInput\n                    name='date'\n                    label='Datum'\n                    autoFocus\n                    ref={register({\n                        validate: v => !isDate(v) || INVALID_DATE_MSG\n                    })}\n                    validationMsg={errors.date}\n                /></div>\n\n                <div><DateInput\n                    name='accountedDate'\n                    label='Buchungsdatum'\n                    ref={register({\n                        validate: v => !isDate(v) || INVALID_DATE_MSG\n                    })}\n                    validationMsg={errors.accountedDate}\n                /><br />\n                </div>\n            </Flex>\n\n            <br />\n            <Flex>\n                <div><Select\n                    name='debitAccount'\n                    label=\"Konto Soll&nbsp;&nbsp;\"\n                    onChange={e => setDebitAccount(e.target.value)}\n                    options={accountPlanOptions}\n                    ref={register({\n                        validate: v => accountPlan[v] || INVALID_ACCOUNT_MSG\n                    })}\n                    validationMsg={errors.debitAccount}\n                />\n                </div>\n                {debitBalance !== undefined && <>\n                    <div><Emphasize>\n                        {debitBalance !== undefined && accountPlan[debitAccount] && accountPlan[debitAccount].name_kont}\n                    </Emphasize></div>\n                    <AlignRight><Emphasize>\n                        {debitBalance !== undefined && <Saldo value={debitBalance} />}\n                    </Emphasize></AlignRight>\n                </>}\n            </Flex>\n\n            <Flex>\n                <div><Select\n                    name='creditAccount'\n                    label=\"Konto Haben&nbsp;\"\n                    onChange={e => setCreditAccount(e.target.value)}\n                    options={accountPlanOptions}\n                    ref={register({\n                        validate: v => accountPlan[v] || INVALID_ACCOUNT_MSG\n                    })}\n                    validationMsg={errors.creditAccount}\n                />\n                </div>\n                {creditBalance !== undefined && <>\n                    <div><Emphasize>\n                        {creditBalance !== undefined && accountPlan[creditAccount].name_kont}\n                    </Emphasize></div>\n                    <AlignRight><Emphasize>\n                        {creditBalance !== undefined && <Saldo value={creditBalance} />}\n                    </Emphasize></AlignRight>\n                </>}\n            </Flex>\n            <br />\n            <FlexEnd>\n                <div>\n                    <CurrencyInput\n                        name='sum'\n                        size={7}\n                        label='Summe'\n                        ref={register({ required: INVALID_SUM_MSG, min: 0 })}\n                        validationMsg={errors.sum}\n                    />\n                    <HorSpacer />\n                </div>\n                <div>\n                    <Select\n                        size={7}\n                        name='tax'\n                        label='Steuerschl.'\n                        options={taxes.map(t => { return { value: t.fasuch, name: t.fatext } })}\n                        ref={register({ validate: v => (validTaxOptions.indexOf(v) > -1) || INVALID_TAX_MSG })}\n                        validationMsg={errors.tax}\n                    />\n                </div>\n            <br />\n            </FlexEnd>\n            <TextInput\n                name='text'\n                label='Text&nbsp;'\n                size={30}\n                ref={register({ required: TEXT_EMPTY_MSG })}\n                validationMsg={errors.text}\n            />\n        </Padding>\n        <EditFormKeyboardControls cancel={cancel} />\n    </form>\n\n\n}\n\nexport default AccountingRecordForm","import React, { useEffect, useState } from 'react'\n\nimport { useAlert } from \"react-alert\";\nimport useKey from 'use-key-hook'\n\nimport useAccountingRecords, { indexSelector } from './useAccountingRecords'\nimport SelectForm from '../Common/SelectForm'\n\nimport { Hr, StatusHeader, Scrollable, Emphasize, Loading, Space } from '../UIComponents'\nimport Table from '../Table'\n\nimport AccountingRecordForm from './AccountingRecordForm';\n\n/**\n * converts Date to standardized DOM string\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date\n * @param {Date} d \n */\nconst toDomString = d => `${d.getDate()}-${d.getMonth() + 1}-${d.getFullYear()}`\n\nfunction LaufendeBuchung() {\n    const [positionNr, setPositionNrRaw] = useState('')\n    const setPositionNr = p => setPositionNrRaw(parseInt(p))\n    const dirty = false;\n    const setDirty = () => console.log()\n\n    const { accountingRecords, arMessages, saveAccountingRecord, loading } = useAccountingRecords([indexSelector, dirty])\n\n    const [recordTemplate, setRecordTemplate] = useState()\n    const selectMode = recordTemplate === undefined\n    const editMode = !selectMode\n\n    /** cancel on ESC */\n    const cancel = () => setRecordTemplate(undefined)\n    useKey(() => cancel(), { detectKeys: [27] });\n\n    /** select latest position from accounting records for new accounting record */\n    useEffect(() => {\n        if (accountingRecords.size > 0) {\n            const firstAr = accountingRecords.values().next().value\n            setPositionNr(indexSelector(firstAr) + 1)\n        }\n    }, [accountingRecords, dirty])\n    function selectPosition(pos) {\n        const newPos = accountingRecords.keys().next().value + 1\n        if (pos === newPos) {\n            const defaultDate = accountingRecords.size > 0 ? accountingRecords.values().next().value.date : toDomString(new Date())\n            setRecordTemplate({\n                date: defaultDate,\n                accountedDate: defaultDate\n            })\n        } else if (accountingRecords.has(pos)) {\n            if (pos !== positionNr)\n                setPositionNr(pos)\n            setRecordTemplate({ ...accountingRecords.get(pos) })\n        } else {\n            alert.info(`Position ${pos} nicht erlaubt.`)\n        }\n    }\n\n    /** alerting on errors and success */\n    const alert = useAlert()\n    useEffect(() => {\n        if (arMessages && arMessages.length > 0) {\n            const newMessage = arMessages[arMessages.length - 1]\n            if (newMessage instanceof Error) {\n                alert.error(newMessage.message)\n            } else if (newMessage.title && newMessage.title === 'success') {\n                // TODO: create contract for that -  do that in a place that has control over the transaction - it's somehow an effect\n                // perhaps with prop formState.isSubmitted from react-hook-form?\n                alert.success(newMessage.message)\n                cancel()\n                setDirty(!dirty)\n            } else alert.info(newMessage.message)\n        }\n    }, [arMessages])\n\n    return (\n        <>\n            <StatusHeader>\n                <Emphasize>\n                    {selectMode ? <Space size={11} /> :\n                        (accountingRecords.has(positionNr) ? 'korrigiere ' : <>neue <Space size={6}/></>)}\n                </Emphasize>\n                &nbsp;laufende Buchung\n            </StatusHeader>\n            {selectMode && <SelectForm\n                autoFocus\n                newRecordButtonText={accountingRecords.has(positionNr) ? 'korrigiere' : 'neue Buchung'}\n                label='Pos.'\n                value={positionNr}\n                onSubmit={() => selectPosition(positionNr)}\n                onChange={setPositionNr}\n            />}\n            {editMode && <AccountingRecordForm\n                onSubmit={saveAccountingRecord}\n                cancel={cancel}\n                pos={positionNr}\n                defaultValues={recordTemplate}\n            />}\n            <Hr />\n            {loading ? <Loading /> : <Scrollable>\n                <Table attributes={[\n                    { name: \"Pos.\", selector: r => r.pos },\n                    { name: \"Datum\", selector: r => r.date, date: true },\n                    { name: \"Soll\", selector: r => r.debitAccount },\n                    { name: \"Haben\", selector: r => r.creditAccount },\n                    { name: \"Summe\", selector: r => r.sum, number: true },\n                    { name: \"Text\", selector: r => r.text }\n                ]}\n                    values={Array.from(accountingRecords, ([k, v]) => v)}\n                    keySelector={indexSelector}\n                    onRowClick={v => selectPosition(indexSelector(v))} />\n            </Scrollable>}\n        </>\n    );\n}\n\nexport default LaufendeBuchung;\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Link, Redirect } from 'react-router-dom'\nimport { useAlert } from 'react-alert'\n\nimport { StatusHeader, Emphasize, Minorize } from '../UIComponents'\nimport LabeledInput from '../Common/LabeledInput'\n\nconst Flex = styled.div`\n  margin-top: 15px;\n  display: flex;\n  height: 100%;\n  justify-content: space-evenly;\n`\n\nconst siteIndex = {\n  2: '/accounts',\n  6: '/kontenabfrage',\n  7: '/konten-saldo',\n  9: '/laufende-buchung',\n  12: '/guv',\n}\n\nfunction MenuEntry(props) {\n  return (\n    <li>\n      {props.to ? <Link {...props} /> : <Minorize>{props.children}</Minorize>}\n    </li>\n  )\n}\nfunction MenuBlock({name, children, start = 1}) {\n  return (\n    <>\n      <Emphasize>{name}</Emphasize>\n      <ol start={start}>{children}</ol>\n    </>\n  )\n}\n\nfunction HauptMenue() {\n  const [redirect, setRedirect] = useState()\n  const [site, setSite] = useState('')\n  const [error, setError] = useState()\n\n  const alert = useAlert()\n  useEffect(() => {\n    error && alert.error(error)\n  }, [error])\n\n  const onMenuSubmit = e => {\n    e.preventDefault()\n    if (siteIndex[site]) {\n      setRedirect(siteIndex[site])\n    } else {\n      setSite('')\n      setError('ungueltige Menueauswahl')\n    }\n  }\n\n  return redirect ? (\n    <Redirect to={redirect} />\n  ) : (\n    <>\n      <StatusHeader>Hauptmenue</StatusHeader>\n      <Flex>\n        <div>\n          <MenuBlock name=\"Stammdaten\">\n            <MenuEntry>Steuerschluessel</MenuEntry>\n            <MenuEntry \n            // to={siteIndex[2]}\n            >\n              Konten\n            </MenuEntry>\n            <MenuEntry>Reorganisation</MenuEntry>\n            <MenuEntry>Kontenbelegung</MenuEntry>\n          </MenuBlock>\n          <MenuBlock name=\"Ausdruck\" start={5}>\n            <MenuEntry>Journal</MenuEntry>\n            <MenuEntry to={siteIndex[6]}>\n              Kontenabfrage\n            </MenuEntry>\n            <MenuEntry to={siteIndex[7]}>\n              Konten - Saldo\n            </MenuEntry>\n            <MenuEntry>Konten - Plan</MenuEntry>\n          </MenuBlock>\n        </div>\n        <div>\n          <MenuBlock name=\"Laufende Verarbeitung\" start={9}>\n            <MenuEntry to={siteIndex[9]}>\n              Laufende Buchung\n            </MenuEntry>\n          </MenuBlock>\n          <MenuBlock name=\"Offene-Posten-Auswertungen\"\n          start={10}>\n            <MenuEntry>Kunde</MenuEntry>\n            <MenuEntry>Lieferant</MenuEntry>\n          </MenuBlock>\n          <MenuBlock name=\"Abschluss, Auswertungen\" start={12}>\n            <MenuEntry to={siteIndex[12]}>\n              Gewinn und Verlust\n            </MenuEntry>\n            <MenuEntry>Kontrollfunktion</MenuEntry>\n            <MenuEntry>Monatsabschluss</MenuEntry>\n          </MenuBlock>\n        </div>\n      </Flex>\n      <Flex>\n        <form onSubmit={e => onMenuSubmit(e)}>\n          <LabeledInput\n            autoFocus\n            label=\"Ihre Auswahl\"\n            size=\"2\"\n            value={site}\n            onChange={e => setSite(e.target.value)}\n          />\n        </form>\n      </Flex>\n    </>\n  )\n}\n\nexport default HauptMenue\n","import React, { useState, useEffect } from 'react'\nimport useKey from 'use-key-hook'\nimport { useAlert } from 'react-alert'\nimport { Redirect } from 'react-router-dom'\n\nimport { StatusHeader, Hr, Scrollable, UpperCase, Loading, Failed, NoWrap } from '../UIComponents'\nimport DateInput from '../Common/DateInput'\nimport KeyboardControls, { KeyButton } from '../KeyboardControls'\nimport Table from '../Table'\nimport useUrlForRead from '../useUrlForRead'\n\nconst toString = d => `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`\nconst createQuery = (from, to) => `/account-overview?from=${from}&to=${to}`\n\nfunction Kontenabfrage() {\n    const [from, setFrom] = useState('2000-01-01')\n    const [to, setTo] = useState(toString(new Date()))\n    const [query, setQuery] = useState(createQuery(from, to))\n\n    const [redirect, setRedirect] = useState()\n    useKey(() => setRedirect(true), { detectKeys: [27] });\n\n    const { result: accountOverview, loading, error: aoErrored } = useUrlForRead(query)\n    const { result: accountPlan, error: apErrored } = useUrlForRead('/account-plan')\n    const safeAccountPlan = (accountPlan || {})\n    const { result: accountConfig, acErrored } = useUrlForRead('/account-config')\n\n    const alert = useAlert()\n    useEffect(() => {\n        aoErrored && alert.error('Konnte Kontenabfrage nicht vom Server laden')\n        apErrored && alert.error('Konnte Kontenplan (konten.dbf) nicht vom Server laden')\n        acErrored && alert.error('Konnte Kontenkonfiguration (account-config.edn) nicht vom Server laden')\n    }, [aoErrored, apErrored, acErrored])\n\n    if (redirect)\n        return <Redirect to={redirect} />\n\n    return <>\n        <form onSubmit={e => {\n            e.preventDefault()\n            setQuery(createQuery(from, to))\n        }}>\n            <StatusHeader join >\n                Kontenabfrage\n                <DateInput value={from}\n                    onChange={e => setFrom(e.target.value)}\n                    autoFocus name='from' label=' von' />\n                &nbsp;<NoWrap><DateInput value={to}\n                    onChange={e => setTo(e.target.value)}\n                    name='to' label='bis' />\n                    </NoWrap>\n            </StatusHeader>\n\n            <KeyboardControls>\n                <KeyButton\n                    active\n                    text='ESC: Hauptmenue'\n                    command={() => setRedirect('/')}\n                />\n                <KeyButton\n                    active\n                    text='&#8617; : anwenden'\n                    submit\n                />\n            </KeyboardControls>\n        </form>\n        <Hr />\n        {loading ? <Loading /> : aoErrored ? <Failed /> :\n            <Scrollable>\n                {Object.keys((accountOverview || {})).map(k => <>\n                    <UpperCase>{accountConfig ? accountConfig.kklasse_name[k] : k}</UpperCase>\n                    <Table accountingSummary attributes={[\n                        { name: \"Konto\", selector: r => r.account },\n                        { name: \"Kontoname\", selector: r => safeAccountPlan[r.account] ? safeAccountPlan[r.account].name_kont : r.account },\n                        { name: \"Haben\", summarize: 'H', suffix: 'H', number: true, selector: r => r.debit !== 0 && r.debit },\n                        { name: \"Soll\", summarize: 'S', suffix: 'S', number: true, selector: r => r.credit !== 0 && r.credit },\n                        { name: \"Saldo\", expressive: true, creditDebitSuffix: true, number: true, selector: r => r.debit - r.credit },\n                    ]}\n                        values={accountOverview[k]}\n                        keySelector={r => r.account}\n                        onRowClick={r => setRedirect(\"/konten-saldo/\" + r.account)}\n                    /></>\n                )}\n            </Scrollable>\n        }\n    </>\n}\n\nexport default Kontenabfrage","import React, { useState, useEffect } from 'react'\nimport { useParams, Redirect } from 'react-router-dom'\nimport useKey from 'use-key-hook'\nimport { useAlert } from 'react-alert'\n\nimport {\n  StatusHeader,\n  Hr,\n  Scrollable,\n  Centered,\n  Emphasize,\n  Loading,\n  Failed,\n} from '../UIComponents'\nimport Select from '../Common/Select'\nimport KeyboardControls, { KeyButton } from '../KeyboardControls'\nimport useUrlForRead from '../useUrlForRead'\nimport Table from '../Table'\n\nfunction KontenSaldo() {\n  const { accountNo } = useParams()\n  const [account, setAccount] = useState(accountNo)\n  const { result, loading, error } = useUrlForRead(\n    '/account-expressive?accountNo=' + accountNo\n  )\n  const { result: accountPlan, error: apErrored } = useUrlForRead(\n    '/account-plan'\n  )\n  const accountPlanOptions = Object.keys(accountPlan || {}).map(k => {\n    return {\n      value: accountPlan[k].konto_nr,\n      name: accountPlan[k].name_kont,\n    }\n  })\n\n  const alert = useAlert()\n  useEffect(() => {\n    error && alert.error('Konnte Kontensaldo nicht vom Server laden')\n    apErrored &&\n      alert.error('Konnte Kontenplan (konten.dbf) nicht vom Server laden')\n  }, [error, apErrored])\n\n  const [redirect, setRedirect] = useState()\n  useKey(() => setRedirect('/'), { detectKeys: [27] })\n\n  if (redirect) {\n    return <Redirect from={'/konten-saldo/' + account} to={redirect} />\n  }\n\n  return (\n    <>\n    <form\n      onSubmit={e => {\n        e.preventDefault()\n        setRedirect('/reload/konten-saldo/' + account)\n      }}\n    >\n    <StatusHeader>\n        <Centered>\n          Kontosaldo von{' '}\n          {accountPlan && accountPlan[accountNo] && (\n            <Emphasize>&nbsp;{accountPlan[accountNo].name_kont}</Emphasize>\n          )}\n          <Select\n            options={accountPlanOptions}\n            autoFocus\n            name=\"account\"\n            value={account}\n            onChange={e => setAccount(e.target.value)}\n          />\n        </Centered>\n      </StatusHeader>\n      <KeyboardControls>\n        <KeyButton\n          active\n          text=\"ESC: Hauptmenue\"\n          command={() => setRedirect('/')}\n        />\n        <KeyButton\n          active\n          text=\"Kontenabfrage\"\n          command={() => setRedirect('/kontenabfrage')}\n        />\n        <KeyButton active text=\"&#8617; : Kontensaldo\" type=\"submit\" />\n      </KeyboardControls>\n      </form>\n      <Hr />\n      {loading ? (\n        <Loading />\n      ) : error ? (\n        <Failed />\n      ) : result && result.length < 1 ? (\n        <Centered>Keine Buchungen gefunden</Centered>\n      ) : (\n        <Scrollable>\n          <Table\n            attributes={[\n              { name: 'Beleg', selector: r => r.pos },\n              { name: 'Buchung', date: true, selector: r => r.accountedDate },\n              {\n                name: 'Haben',\n                summarize: 'H',\n                number: true,\n                suffix: 'H',\n                selector: r => r.debit !== 0 && r.debit,\n              },\n              {\n                name: 'Soll',\n                summarize: 'S',\n                number: true,\n                suffix: 'S',\n                selector: r => r.credit !== 0 && r.credit,\n              },\n              { name: 'Buchungstext', expressive: true, selector: r => r.text },\n              { name: 'Gegen', selector: r => r.gegen },\n            ]}\n            values={result}\n            keySelector={r => r.pos}\n            accountingSummary\n          />\n        </Scrollable>\n      )}\n      </>\n  )\n}\n\nexport default KontenSaldo\n","import React from 'react'\nimport { Redirect, useParams } from 'react-router-dom'\n\nfunction Reload() {\n    const { url, param } = useParams()\n    return <Redirect to={'/' + url + '/' + param} />\n}\n\nexport default Reload","import React, { useState } from 'react'\n\nimport SelectForm from '../Common/SelectForm'\nimport { StatusHeader, Hr, Loading, Scrollable, Failed } from '../UIComponents'\nimport Table from '../Table'\nimport {useAccountPlanAttributes, useAccountPlan} from '../useUrlForRead'\nimport { Redirect } from 'react-router-dom'\n\nconst indexSelector = r => r.konto_nr\n\nfunction Konten() {\n    const { result: attributes, loading: loadingAtts, error: attsErrorerd } = useAccountPlanAttributes()\n    const atts = (attributes || []).map(a => a.name)\n    const { result: accountMap, loading, error } = useAccountPlan()\n    const accountList = Object.keys(accountMap || {}).map(no => accountMap[no])\n\n    const [accountNo, setAccountNo] = useState('')\n    const [redirect, setRedirect] = useState()\n\n    const selectAccountNo = no => setRedirect('account-form/' + no)\n\n    if (redirect)\n    return <Redirect to={redirect}/>\n    else return <><StatusHeader>Konten\n    </StatusHeader>\n        <SelectForm\n            value={accountNo}\n            onChange={setAccountNo}\n            autoFocus\n            newRecordButtonText='neues Konto'\n            label='Kontennr.:'\n            onSubmit={() => selectAccountNo(accountNo)}\n        />\n        <Hr />\n        {(loading || loadingAtts) ? <Loading /> : (error || attsErrorerd) ? <Failed /> : <Scrollable>\n            <Table\n                attributes={(atts || []).map(att => att.toLowerCase()).map(att => {\n                    return { name: att, selector: v => v[att] }\n                })}\n                keySelector={p => p.konto_nr}\n                values={accountList}\n                onRowClick={r => selectAccountNo(indexSelector(r))}\n            />\n        </Scrollable>}\n    </>\n}\n\nexport default Konten","import React, { useState, useEffect } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport useKey from 'use-key-hook'\nimport { useAlert } from 'react-alert'\n\nimport KeyboardControls, { KeyButton } from '../KeyboardControls'\nimport { StatusHeader, Centered, Hr, Loading, Scrollable } from '../UIComponents'\nimport useUrlForRead from '../useUrlForRead'\nimport Table from '../Table'\n\nfunction Guv() {\n    const { result, loading, error } = useUrlForRead('/guv')\n    const alert = useAlert()\n    useEffect(() => error && alert.error(\"Konnte GuV nicht vom Server laden\"), [error])\n\n    const [redirect, setRedirect] = useState(false)\n    useKey(() => setRedirect('/'), { detectKeys: [27] });\n    if (redirect) return <Redirect to={redirect} />\n\n    const months = result ? Object.keys((result.ertraege || {})) : []\n    months.sort((a, b) => a === b ? 0 : a > b ? 1 : -1)\n    const values = []\n    let accumulated = 0\n    months.forEach(month => {\n        const aufwand = result.aufwendungen[month]\n        const ertrag = result.ertraege[month]\n        const gewinn = ertrag - aufwand\n        accumulated = gewinn + accumulated\n        values.push({ month, ertrag, aufwand, gewinn, accumulated })\n    })\n\n\n    return <><StatusHeader>\n        <Centered>Gewinn und Verlustrechnung</Centered>\n    </StatusHeader>\n        <KeyboardControls>\n            <KeyButton\n                active\n                text='ESC: Hauptmenue'\n                command={() => setRedirect('/')}\n            />\n        </KeyboardControls>\n        <Hr />\n        {loading ? <Loading /> : <Scrollable><Table accountingSummary attributes={[{\n            name: \"Monat\",\n            selector: r => r.month,\n            date:true\n        }, {\n            name: \"Aufwendungen\", summarize: 'S',\n            selector: r => r.aufwand,\n            number: true,\n            suffix: 'S'\n        }, {\n            name: \"Ertraege\", summarize: 'H',\n            selector: r => r.ertrag,\n            number: true,\n            suffix: 'H'\n        }, {\n            name: \"Gewinn\",\n            selector: r => r.gewinn,\n            number: true,\n            creditDebitSuffix: true,\n            customFooter: values.reduce((a, r) => r.gewinn + a, 0)\n        }, {\n            name: \"Akkumuliert\",\n            selector: r => r.accumulated,\n            number: true,\n            creditDebitSuffix: true,\n            customFooter: accumulated\n        },]}\n            values={values}\n            keySelector={r => r.month}\n        /></Scrollable>}\n    </>\n\n}\n\nexport default Guv","import React, { useEffect, useState } from 'react'\nimport useForm from 'react-hook-form'\nimport styled from 'styled-components'\nimport { Redirect, useParams } from 'react-router-dom'\nimport useKey from 'use-key-hook'\n\nimport { Padding, StatusHeader } from '../UIComponents'\nimport LabeledInput from '../Common/LabeledInput'\nimport { EditFormKeyboardControls } from '../KeyboardControls'\nimport useUrlForRead, { useAccountPlanAttributes } from '../useUrlForRead'\n\nconst Flex = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n`\nconst Wrapper = styled.div``\n\nconst mapTypeToInputType = type => {\n  switch (type) {\n    case '\\\\C':\n      return 'text'\n    case '\\\\N':\n      return 'number'\n    case '\\\\D':\n      return 'date'\n    case '\\\\L':\n      return 'checkbox'\n    default:\n      return 'text'\n  }\n}\n\nconst escUrl = '/accounts'\n\nfunction KontenRecordForm() {\n  const [redirect, setRedirect] = useState()\n\n  const {\n    result: attsRaw,\n    loading: loadingAtts,\n    error: attsErrorerd,\n  } = useAccountPlanAttributes()\n  const atts = (attsRaw || []).map(a => {\n    return { ...a, name: a.name.toLowerCase() }\n  })\n\n  const { accountNo } = useParams()\n  const { result: accountValues } = useUrlForRead(\n    '/account?accountNo=' + accountNo\n  )\n  const { handleSubmit, register, errors, reset } = useForm({\n    defaultValues: accountValues,\n  })\n  useEffect(() => reset(accountValues), [accountValues, reset])\n  useKey(() => setRedirect(escUrl), { detectKeys: [27] });\n\n  const onSubmit = e => {\n    console.log('submitting...', e)\n    e.preventDefault()\n  }\n  if (redirect) return <Redirect to={redirect} />\n  else\n    return (\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <StatusHeader>Konten</StatusHeader>\n        <Padding>\n          <Flex>\n            {(atts || []).map((a, i) => (\n              <Wrapper key={a.name}>\n                <LabeledInput\n                  autoFocus={i===0}\n                  label={a.name}\n                  name={a.name}\n                  size={a.length}\n                  type={mapTypeToInputType(a.type)}\n                  ref={register({\n                    validate: v => (v + '').length > a.length || 'wert zu lang',\n                  })}\n                  validationMsg={errors[a.name]}\n                />\n              </Wrapper>\n            ))}\n          </Flex>\n        </Padding>\n        <EditFormKeyboardControls cancel={() => setRedirect(escUrl)} />\n      </form>\n    )\n}\n\nexport default KontenRecordForm\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport { ThemeProvider } from 'styled-components'\nimport clipperTheme from './clipperTheme'\nimport './App.css';\nimport LaufendeBuchung from './LaufendeBuchung'\nimport HauptMenue from './HauptMenue'\nimport Kontenabfrage from './Kontenabfrage'\nimport KontenSaldo from './KontenSaldo'\nimport Reload from './KontenSaldo/Reload'\nimport Konten from './Konten'\nimport Guv from './Guv'\n\nimport { Screen, Content } from './UIComponents'\nimport KontenRecordForm from './KontenForm';\n\nfunction App() {\n\n  return (\n    <ThemeProvider theme={clipperTheme}>\n      <Router>\n        <Screen>\n          <Content>\n            <Switch>\n              <Route path=\"/laufende-buchung\"><LaufendeBuchung /></Route>\n              <Route path='/reload/:url/:param'><Reload /></Route>\n              <Route path='/kontenabfrage'><Kontenabfrage /></Route>\n              <Route path='/konten-saldo/:accountNo'><KontenSaldo /></Route>\n              <Route path='/konten-saldo'><KontenSaldo /></Route>\n              <Route path='/guv'><Guv /></Route>\n              <Route path='/accounts'><Konten /></Route>\n              <Route path='/account-form/:accountNo'><KontenRecordForm /></Route>\n              <Route path=\"/\"><HauptMenue /></Route>\n            </Switch>\n          </Content>\n        </Screen>\n      </Router>\n    </ThemeProvider >\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { positions, Provider } from \"react-alert\";\nimport AlertTemplate from \"react-alert-template-basic\";\n\nconst options = {\n    timeout: 5000,\n    position: positions.BOTTOM_CENTER\n};\n\nconst Root = () => (\n    <Provider template={AlertTemplate} {...options}>\n        <App />\n    </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}