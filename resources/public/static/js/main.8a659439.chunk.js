(this.webpackJsonpfinanzbuchhaltung=this.webpackJsonpfinanzbuchhaltung||[]).push([[0],{36:function(e,t,n){e.exports=n(54)},41:function(e,t,n){},42:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),u=n.n(c),o=(n(41),n(17)),l=n(18),i=n(2),m="rgb(7,1,126)",s={background:m,font:"rgb(179,179,179);",variable:m,variableBg:"rgb(0,110,107)",active:m,activeBg:"rgb(179,179,179);",minor:"#5a5a5a",emphasize:"rgb(253,255,0)",header:"white"},f=(n(42),n(9)),b=n(1),d=n(11),v=n(13),E=n.n(v),g=n(4),p=n.n(g),h=n(16),O=n(7);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return parseInt(e.pos)},S=function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText+" at "+e.url);return e.json()}))};var w=function(e){var t=Object(a.useState)(new Map),n=Object(b.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)([]),o=Object(b.a)(u,2),l=o[0],i=o[1],m=Object(a.useState)(!1),s=Object(b.a)(m,2),f=s[0],d=s[1];return Object(a.useEffect)((function(){(function(){var e=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,S("/accounting-records");case 4:t=e.sent,n=t.slice(1).sort((function(e,t){return y(t)-y(e)})).reduce((function(e,t){return e.set(y(t),t),e}),new Map),d(!1),c(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),d(!1),i([].concat(Object(h.a)(l),[e.t0]));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[].concat(Object(h.a)(e),[l])),{accountingRecords:r,arMessages:l,saveAccountingRecord:function(e){(function(){var t=Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=r.has(y(e))?"/update-record":"/create-record",t.next=4,S(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x({},e))});case 4:i([].concat(Object(h.a)(l),[(a="Buchung erfolgreich gespeichert",{title:"success",message:a})])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i([].concat(Object(h.a)(l),[t.t0]));case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()},loading:f}},k=n(8),K=n(3);function F(){var e=Object(K.a)(["height: 100%;\ndisplay: flex;\nalign-items: center;\njustify-content: center;"]);return F=function(){return e},e}function D(){var e=Object(K.a)(["\npadding: 5px 20px 5px 20px;"]);return D=function(){return e},e}function P(){var e=Object(K.a)(["\nmargin:0;\nborder:0.5px solid;"]);return P=function(){return e},e}function M(){var e=Object(K.a)(["\noverflow:scroll;\npadding:0 20px 0 20px;\nflex-grow : 1;"]);return M=function(){return e},e}function B(){var e=Object(K.a)(["\nheight: 100%;\ndisplay: flex;\nflex-flow: column;\noverflow:hidden;\n@media not print {border: 1px solid;}"]);return B=function(){return e},e}function z(){var e=Object(K.a)(["\n@media not print {\n    height: 95vh;\n}\ndisplay: block;\nmax-width: 1000px;\nmargin-left:auto;\nmargin-right:auto;\nmargin-top: 1em;"]);return z=function(){return e},e}function C(){var e=Object(K.a)(["\ntext-transform: uppercase"]);return C=function(){return e},e}function R(){var e=Object(K.a)(["\ncolor: ",""]);return R=function(){return e},e}function A(){var e=Object(K.a)(["\n@media not print {\n    color: ","\n}"]);return A=function(){return e},e}function T(){var e=Object(K.a)(["\nbackground-color: ",";\ncolor: ",";\nborder: 0;"]);return T=function(){return e},e}function H(){var e=Object(K.a)(["\nbackground-color: ",";\ncolor: ",";"]);return H=function(){return e},e}function _(){var e=Object(K.a)(["grid-gap:0;"]);return _=function(){return e},e}var N=Object(i.b)(k.b)(_()),V=(i.b.span(H(),(function(e){return e.theme.variableBg}),(function(e){return e.theme.header})),i.b.button(T(),(function(e){return e.theme.variableBg}),(function(e){return e.active?e.theme.header:e.theme.brightGrey}))),G=i.b.span(A(),(function(e){return e.theme.emphasize})),L=i.b.span(R(),(function(e){return e.theme.minor})),I=i.b.p(C()),J=i.b.div(z()),q=i.b.div(B()),W=i.b.div(M()),Y=i.b.hr(P()),U=i.b.div(D());function $(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{columns:6},r.a.createElement(k.a,{middle:!0,center:!0},"FIBU 2.1"),r.a.createElement(k.a,Object.assign({},e,{width:e.join?5:3}),e.children),!e.join&&r.a.createElement(k.a,{width:2,middle:!0},e.right)),r.a.createElement(Y,null))}function Q(){return r.a.createElement(r.a.Fragment,null,"\xa0 \xa0")}var X=i.b.div(F());function Z(){return r.a.createElement(X,null,r.a.createElement(G,null,"laedt..."))}function ee(){return r.a.createElement(X,null,r.a.createElement(G,null,"Konnte Daten aufgrund eines Serverfehlers nicht laden"))}function te(){var e=Object(K.a)(["\nmargin-right: 7px;"]);return te=function(){return e},e}function ne(){var e=Object(K.a)(["\ncolor: ",";\nbackground-color: ",";\nborder: none;\n&:focus {\n    color: ",";\n    background-color: ",";\n    border:none;\n}"]);return ne=function(){return e},e}function ae(){var e=Object(K.a)(["font-size:smaller"]);return ae=function(){return e},e}var re=i.b.span(ae()),ce=i.b.input(ne(),(function(e){return e.theme.variable}),(function(e){return e.theme.variableBg}),(function(e){return e.theme.active}),(function(e){return e.theme.activeBg}));ce.defaultProps={theme:{inputBg:"white",input:"black"}};var ue=i.b.label(te()),oe=function(e){return r.a.createElement(G,null,"\u26a0 ",r.a.createElement(re,null,e.text))};var le=Object(a.forwardRef)((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null,e.label),r.a.createElement(ce,Object.assign({},e,{ref:t})))}));function ie(){var e=Object(K.a)(["\n  display: flex;\n  align-content: flex-end;\n  justify-content: space-between;\n  @media print {\n    display: none;\n  }\n"]);return ie=function(){return e},e}function me(){var e=Object(K.a)(["\n  width: 100%;\n  font-size: 1em;\n"]);return me=function(){return e},e}var se=Object(i.b)(V)(me()),fe=i.b.div(ie());function be(e){return r.a.createElement(fe,{columns:5},e.children)}function de(e){return r.a.createElement("div",null,e.active&&r.a.createElement(se,Object.assign({type:e.submit?"submit":"button"},e,{onClick:e.command}),e.symbol&&e.symbol,e.text))}function ve(e){return r.a.createElement(be,null,r.a.createElement(de,{active:!0,type:"reset",command:e.cancel,key:"ESC",text:"ESC: Abbrechen"}),r.a.createElement(de,{active:!0,text:"\u21b9 : naechstes Feld"}),r.a.createElement(de,{active:!0,text:"\u21a9 : speichern",type:"submit"}))}var Ee=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],u=n[1];return E()((function(){return u(!0)}),{detectKeys:[27]}),c?r.a.createElement(l.a,{to:"/"}):r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(U,null,r.a.createElement(N,{columns:3},r.a.createElement(k.a,null,r.a.createElement(le,Object.assign({},e,{type:"number",style:{width:"50px"},min:"1",onChange:function(t){return e.onChange(t.target.value)}}))))),r.a.createElement(be,null,r.a.createElement(de,{active:!0,text:"ESC: Hauptmenue",command:function(){return u(!0)}}),r.a.createElement(de,{active:!0,text:" : "+e.newRecordButtonText,symbol:"\u21a9",command:function(){return e.onSubmit()}})))},ge=n(35);function pe(){var e=Object(K.a)(["",""]);return pe=function(){return e},e}function he(){var e=Object(K.a)(["text-align:right;"]);return he=function(){return e},e}function Oe(){var e=Object(K.a)(["text-align:right;"]);return Oe=function(){return e},e}var je=i.b.th(Oe()),xe=function(e){return e&&parseFloat(Math.round(100*e)/100).toFixed(2)},ye=i.b.td(he()),Se=function(e){return e.th?r.a.createElement(je,e):r.a.createElement(ye,e)},we=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,"\xa0",t)},ke=i.b.span(pe(),(function(e){return e.value%1===0&&"padding-right: 1.85em;"})),Ke=function(e){var t=e.children,n=e.th,a=e.creditDebitSuffix,c=e.suffix,u=t;if(void 0===u)return r.a.createElement(Se,{th:n});if(xe(u)===xe(0))return r.a.createElement(Se,{th:n},"0",(a||c)&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0"));var o=u<0,l=(a?function(e){return e<0?-e:e}(u):u).toLocaleString();return r.a.createElement(Se,{th:n},u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{value:u},function(e){return 10*e%1===0&&e%1!==0}(u)?l+"0":l),c&&r.a.createElement(we,null,c),a&&r.a.createElement(we,null,o?"S":"H")))};function Fe(){var e=Object(K.a)(["\n    text-align:",";"]);return Fe=function(){return e},e}function De(){var e=Object(K.a)(["\n",""]);return De=function(){return e},e}function Pe(){var e=Object(K.a)(["\n  width: 100%;\n  border-collapse:collapse;\n  @media print {\n      td {\n        border-bottom: 1px dotted;\n      }\n  }\n  th, td {\n    margin: 0;\n    padding: 3px 5px 3px 3px;\n  }\n  tr:nth-child(even) {\n      background-color: #06025e;\n  }\n  thead th {\n    border-bottom: 1px solid;\n  }\n  tfoot th {\n    border-top: 1px solid;\n  }"]);return Pe=function(){return e},e}function Me(){var e=Object(K.a)(["white-space: nowrap;"]);return Me=function(){return e},e}var Be=i.b.td(Me()),ze=function(e){e.selector;var t=Object(ge.a)(e,["selector"]);return e.number?r.a.createElement(Ke,t):e.date?r.a.createElement(Be,t):r.a.createElement("td",t)},Ce=i.b.table(Pe()),Re=i.b.tr(De(),(function(e){return e.link&&"\ncursor:pointer;\n&:hover {\n    background-color:"+e.theme.variableBg+" !important;\n    color:"+e.theme.active+";\n}\n"})),Ae=i.b.th(Fe(),(function(e){return e.alignRight?"right":"left"}));var Te=function(e){return r.a.createElement(Ce,{cellspacing:"0",cellpadding:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,e.attributes.map((function(e){return r.a.createElement(Ae,{alignRight:e.number,number:e.number,key:e.name},e.name)})))),r.a.createElement("tbody",null,e.values&&e.values.map((function(t){return r.a.createElement(Re,{link:e.onRowClick,onClick:function(){return e.onRowClick&&e.onRowClick(t)},key:e.keySelector(t)},e.attributes.map((function(e,n){return r.a.createElement(ze,Object.assign({},e,{key:n}),e.selector(t))})))}))),e.accountingSummary&&e.values&&r.a.createElement("tfoot",null,r.a.createElement("tr",null,e.attributes.map((function(t){var n=t.name;return t.customFooter?r.a.createElement(Ke,{th:!0,creditDebitSuffix:!0,key:n},t.customFooter):t.summarize?r.a.createElement(Ke,{th:!0,suffix:t.summarize,key:n},e.values.reduce((function(e,n){return e+t.selector(n)}),0)):t.expressive?r.a.createElement(Ke,{th:!0,creditDebitSuffix:!0},e.values.reduce((function(e,t){return e+t.debit-t.credit}),0)):r.a.createElement(Ke,{th:!0,key:n})})))),e.children)},He=n(31);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ne=function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:e.status,status:e.status,message:e.statusText,url:e.url}));return e.json()}))},Ve=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne("/balance?accountNo="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){var t=e.accountPlan,n=e.debitAccount,r=e.creditAccount,c=Object(a.useState)(!1),u=Object(b.a)(c,2),o=u[0],l=u[1],i=Object(a.useState)(),m=Object(b.a)(i,2),s=m[0],f=m[1],d=Object(a.useState)(),v=Object(b.a)(d,2),E=v[0],g=v[1];return Object(a.useEffect)((function(){(function(){var e=Object(O.a)(p.a.mark((function e(){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[n]){e.next=8;break}return e.next=4,Ve(n);case 4:a=e.sent,f(a.sum),e.next=9;break;case 8:f(void 0);case 9:if(!t[r]){e.next=16;break}return e.next=12,Ve(r);case 12:c=e.sent,g(c.sum),e.next=17;break;case 16:g(void 0);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),l(!0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[t,n,r]),[{creditBalance:E,debitBalance:s},o]};function Le(){var e=Object(K.a)(["\n",""]);return Le=function(){return e},e}var Ie=Object(i.b)(le)(Le(),(function(e){return e.emphasize&&"background-color:"+e.theme.emphasize+";"}));var Je=Object(a.forwardRef)((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,Object.assign({},e,{ref:t,emphasize:e.validationMsg})),e.validationMsg&&r.a.createElement(oe,{text:e.validationMsg.message}))}));function qe(){var e=Object(K.a)(["\ntext-align:right;"]);return qe=function(){return e},e}var We=Object(i.b)(Ie)(qe());var Ye=Object(a.forwardRef)((function(e,t){return r.a.createElement(We,Object.assign({},e,{emphasize:e.validationMsg,ref:t,type:"number",step:"any"}))}));var Ue=Object(a.forwardRef)((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,Object.assign({rows:1},e,{emphasize:e.validationMsg,ref:t,placeholder:"dd.mm.yyyy",value:e.value,type:"date"})),e.validationMsg&&r.a.createElement(oe,{text:e.validationMsg.message}))}));var $e=Object(a.forwardRef)((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,Object.assign({size:7},e,{emphasize:e.validationMsg,ref:t,list:e.name})),r.a.createElement("datalist",{id:e.name},e.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.value," - ",e.name)}))),e.validationMsg&&r.a.createElement(oe,{text:e.validationMsg.message}))}));var Qe=function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(!0),o=Object(b.a)(u,2),l=o[0],i=o[1],m=Object(a.useState)(),s=Object(b.a)(m,2),f=s[0],d=s[1];return Object(a.useEffect)((function(){i(!0),function(){var t=Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e).then((function(e){if(!e.ok)throw new Error(e.statusText+" at "+e.url);return e.json()}));case 3:n=t.sent,i(!1),c(n),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),i(!1),d(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),{result:r,error:f,loading:l}},Xe="Konto ex. nicht",Ze="Datum ex. nicht",et="Steuerschl. ex. nicht",tt="Keinen Text eingegeben",nt="Keinen Betrag eingegeben",at=function(e){return isNaN(Date.parse(e))},rt=function(e){var t=e.value;return r.a.createElement(r.a.Fragment,null,"Saldo ",(t<0?-t:t).toLocaleString()," ",t<0?"S":"H"," ")};var ct=function(e){var t=Qe("/account-plan"),n=t.result,c=t.loading,u=t.error,o=Object.keys(n||{}).map((function(e){return{value:n[e].konto_nr,name:n[e].name_kont}})),l=Qe("/taxes").result||[],i=Object(He.a)({defaultValues:e.defaultValues}),m=i.handleSubmit,s=i.register,f=i.errors,d=i.reset;Object(a.useEffect)((function(){return d(e.defaultValues)}),[e.defaultValues,d]);var v=Object(a.useState)(),E=Object(b.a)(v,2),g=E[0],p=E[1],h=Object(a.useState)(),O=Object(b.a)(h,2),j=O[0],x=O[1],y=Ge({accountPlan:n,debitAccount:j,creditAccount:g}),S=Object(b.a)(y,1)[0],w=S.creditBalance,K=S.debitBalance,F=l.map((function(e){return e.fasuch}));return u?r.a.createElement("p",null,"Konnte Buchungsplan nicht vom Server laden."):c?r.a.createElement(Z,null):r.a.createElement("form",{onSubmit:m(e.onSubmit)},r.a.createElement(U,null,r.a.createElement(N,{columns:3},r.a.createElement(k.a,null,r.a.createElement(le,{name:"pos",label:"Position Nr.",size:6,readOnly:!0,value:e.pos,ref:s})),r.a.createElement(k.a,null,r.a.createElement(Ue,{name:"date",label:"Datum",autoFocus:!0,ref:s({validate:function(e){return!at(e)||Ze}}),validationMsg:f.date})),r.a.createElement(k.a,null,r.a.createElement(Ue,{name:"accountedDate",label:"Buchungsdatum",ref:s({validate:function(e){return!at(e)||Ze}}),validationMsg:f.accountedDate}),r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement(N,{columns:void 0===K?1:3},r.a.createElement(k.a,null,r.a.createElement($e,{name:"debitAccount",label:"Konto Soll\xa0\xa0",onChange:function(e){return x(e.target.value)},options:o,ref:s({validate:function(e){return n[e]||Xe}}),validationMsg:f.debitAccount})),void 0!==K&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(G,null,void 0!==K&&n[j]&&n[j].name_kont)),r.a.createElement(k.a,null,r.a.createElement(G,null,void 0!==K&&r.a.createElement(rt,{value:K}))))),r.a.createElement(N,{columns:void 0===w?1:3},r.a.createElement(k.a,null,r.a.createElement($e,{name:"creditAccount",label:"Konto Haben\xa0",onChange:function(e){return p(e.target.value)},options:o,ref:s({validate:function(e){return n[e]||Xe}}),validationMsg:f.creditAccount})),void 0!==w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(G,null,void 0!==w&&n[g].name_kont)),r.a.createElement(k.a,null,r.a.createElement(G,null,void 0!==w&&r.a.createElement(rt,{value:w}))))),r.a.createElement("br",null),r.a.createElement(Ye,{name:"sum",size:7,label:"Summe",ref:s({required:nt,min:0}),validationMsg:f.sum}),r.a.createElement(Q,null),r.a.createElement($e,{size:7,name:"tax",label:"Steuerschl.",options:l.map((function(e){return{value:e.fasuch,name:e.fatext}})),ref:s({validate:function(e){return F.indexOf(e)>-1||et}}),validationMsg:f.tax}),r.a.createElement("br",null),r.a.createElement(Je,{name:"text",label:"Text\xa0",size:30,ref:s({required:tt}),validationMsg:f.text})),r.a.createElement(ve,{cancel:e.cancel}))};function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ot=function(e){return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())};var lt=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],u=function(e){return c(parseInt(e))},o=Object(a.useState)(!1),l=Object(b.a)(o,2),i=l[0],m=l[1],s=w([y,i]),v=s.accountingRecords,g=s.arMessages,p=s.saveAccountingRecord,h=s.loading,O=Object(a.useState)(),j=Object(b.a)(O,2),x=j[0],S=j[1],k=void 0===x,K=!k,F=function(){return S(void 0)};function D(e){if(e===v.keys().next().value+1){var t=v.size>0?v.values().next().value.date:ot(new Date);S({date:t,accountedDate:t})}else v.has(e)?(e!==n&&u(e),S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v.get(e)))):P.info("Position ".concat(e," nicht erlaubt."))}E()((function(){return F()}),{detectKeys:[27]}),Object(a.useEffect)((function(){if(v.size>0){var e=v.values().next().value;u(y(e)+1)}}),[v,i]);var P=Object(d.c)();return Object(a.useEffect)((function(){if(g&&g.length>0){var e=g[g.length-1];e instanceof Error?P.error(e.message):e.title&&"success"===e.title?(P.success(e.message),F(),m(!i)):P.info(e.message)}}),[g]),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{right:"laufende Buchung"},r.a.createElement(G,null,k?"":v.has(n)?"korrigiere ":"neue ")),k&&r.a.createElement(Ee,{autoFocus:!0,newRecordButtonText:"neue Buchung",label:"Position Nr.",value:n,onSubmit:function(){return D(n)},onChange:u}),K&&r.a.createElement(ct,{onSubmit:p,cancel:F,pos:n,defaultValues:x}),r.a.createElement(Y,null),h?r.a.createElement(Z,null):r.a.createElement(W,null,r.a.createElement(Te,{attributes:[{name:"Pos.",selector:function(e){return e.pos}},{name:"Datum",selector:function(e){return e.date},date:!0},{name:"Soll",selector:function(e){return e.debitAccount}},{name:"Haben",selector:function(e){return e.creditAccount}},{name:"Summe",selector:function(e){return e.sum},number:!0},{name:"Text",selector:function(e){return e.text}}],values:Array.from(v,(function(e){var t=Object(b.a)(e,2);t[0];return t[1]})),keySelector:y,onRowClick:function(e){return D(y(e))}})))};function it(){var e=Object(K.a)(["\n  margin-top: 15px;\n  display: flex;\n  height: 100%;\n  justify-content: space-evenly;\n"]);return it=function(){return e},e}var mt=i.b.div(it()),st={2:"/accounts",6:"/kontenabfrage",7:"/konten-saldo",9:"/laufende-buchung",12:"/guv"};function ft(e){return r.a.createElement("li",null,e.to?r.a.createElement(o.b,e):r.a.createElement(L,null,e.children))}function bt(e){var t=e.name,n=e.children,a=e.start,c=void 0===a?1:a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null,t),r.a.createElement("ol",{start:c},n))}var dt=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(b.a)(u,2),i=o[0],m=o[1],s=Object(a.useState)(),f=Object(b.a)(s,2),v=f[0],E=f[1],g=Object(d.c)();return Object(a.useEffect)((function(){v&&g.error(v)}),[v]),n?r.a.createElement(l.a,{to:n}):r.a.createElement(r.a.Fragment,null,r.a.createElement($,{middle:!0},"Hauptmenue"),r.a.createElement(mt,null,r.a.createElement("div",null,r.a.createElement(bt,{name:"Stammdaten"},r.a.createElement(ft,null,"Steuerschluessel"),r.a.createElement(ft,{to:st[2]},"Konten"),r.a.createElement(ft,null,"Reorganisation"),r.a.createElement(ft,null,"Kontenbelegung")),r.a.createElement(bt,{name:"Ausdruck",start:5},r.a.createElement(ft,null,"Journal"),r.a.createElement(ft,{to:st[6]},"Kontenabfrage"),r.a.createElement(ft,{to:st[7]},"Konten - Saldo"),r.a.createElement(ft,null,"Konten - Plan"))),r.a.createElement("div",null,r.a.createElement(bt,{name:"Laufende Verarbeitung",start:9},r.a.createElement(ft,{to:st[9]},"Laufende Buchung")),r.a.createElement(bt,{name:"Offene-Posten-Auswertungen",start:10},r.a.createElement(ft,null,"Kunde"),r.a.createElement(ft,null,"Lieferant")),r.a.createElement(bt,{name:"Abschluss, Auswertungen",start:12},r.a.createElement(ft,{to:st[12]},"Gewinn und Verlust"),r.a.createElement(ft,null,"Kontrollfunktion"),r.a.createElement(ft,null,"Monatsabschluss")))),r.a.createElement(mt,null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),st[i]?c(st[i]):(m(""),E("ungueltige Menueauswahl"))}(e)}},r.a.createElement(le,{autoFocus:!0,label:"Ihre Auswahl",size:"2",value:i,onChange:function(e){return m(e.target.value)}}))))},vt=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},Et=function(e,t){return"/account-overview?from=".concat(e,"&to=").concat(t)};var gt=function(){var e=Object(a.useState)("2000-01-01"),t=Object(b.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(vt(new Date)),o=Object(b.a)(u,2),i=o[0],m=o[1],s=Object(a.useState)(Et(n,i)),f=Object(b.a)(s,2),v=f[0],g=f[1],p=Object(a.useState)(),h=Object(b.a)(p,2),O=h[0],j=h[1];E()((function(){return j(!0)}),{detectKeys:[27]});var x=Qe(v),y=x.result,S=x.loading,w=x.error,k=Qe("/account-plan"),K=k.result,F=k.error,D=K||{},P=Qe("/account-config"),M=P.result,B=P.acErrored,z=Object(d.c)();return Object(a.useEffect)((function(){w&&z.error("Konnte Kontenabfrage nicht vom Server laden"),F&&z.error("Konnte Kontenplan (konten.dbf) nicht vom Server laden"),B&&z.error("Konnte Kontenkonfiguration (account-config.edn) nicht vom Server laden")}),[w,F,B]),O?r.a.createElement(l.a,{to:O}):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g(Et(n,i))}},r.a.createElement($,{join:!0},"Kontenabfrage",r.a.createElement(Ue,{value:n,onChange:function(e){return c(e.target.value)},autoFocus:!0,name:"from",label:" von"}),"\xa0",r.a.createElement(Ue,{value:i,onChange:function(e){return m(e.target.value)},name:"to",label:"bis"})),r.a.createElement(be,null,r.a.createElement(de,{active:!0,text:"ESC: Hauptmenue",command:function(){return j("/")}}),r.a.createElement(de,{active:!0,text:"\u21a9 : anwenden",submit:!0}))),r.a.createElement(Y,null),S?r.a.createElement(Z,null):w?r.a.createElement(ee,null):r.a.createElement(W,null,Object.keys(y||{}).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,M?M.kklasse_name[e]:e),r.a.createElement(Te,{accountingSummary:!0,attributes:[{name:"Konto",selector:function(e){return e.account}},{name:"Kontoname",selector:function(e){return D[e.account]?D[e.account].name_kont:e.account}},{name:"Haben",summarize:"H",suffix:"H",number:!0,selector:function(e){return 0!==e.debit&&e.debit}},{name:"Soll",summarize:"S",suffix:"S",number:!0,selector:function(e){return 0!==e.credit&&e.credit}},{name:"Saldo",expressive:!0,creditDebitSuffix:!0,number:!0,selector:function(e){return e.debit-e.credit}}],values:y[e],keySelector:function(e){return e.account},onRowClick:function(e){return j("/konten-saldo/"+e.account)}}))}))))};var pt=function(){var e=Object(l.g)().accountNo,t=Object(a.useState)(e),n=Object(b.a)(t,2),c=n[0],u=n[1],o=Qe("/account-expressive?accountNo="+e),i=o.result,m=o.loading,s=o.error,f=Qe("/account-plan"),v=f.result,g=f.error,p=Object.keys(v||{}).map((function(e){return{value:v[e].konto_nr,name:v[e].name_kont}})),h=Object(d.c)();Object(a.useEffect)((function(){s&&h.error("Konnte Kontensaldo nicht vom Server laden"),g&&h.error("Konnte Kontenplan (konten.dbf) nicht vom Server laden")}),[s,g]);var O=Object(a.useState)(),j=Object(b.a)(O,2),x=j[0],y=j[1];return E()((function(){return y("/")}),{detectKeys:[27]}),x?r.a.createElement(l.a,{from:"/konten-saldo/"+c,to:x}):r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y("/reload/konten-saldo/"+c)}},r.a.createElement($,{right:r.a.createElement($e,{options:p,autoFocus:!0,name:"account",value:c,onChange:function(e){return u(e.target.value)}})},r.a.createElement(X,null,"Kontosaldo von"," ",v&&v[e]&&r.a.createElement(G,null,"\xa0",v[e].name_kont))),r.a.createElement(be,null,r.a.createElement(de,{active:!0,text:"ESC: Hauptmenue",command:function(){return y("/")}}),r.a.createElement(de,{active:!0,text:"Kontenabfrage",command:function(){return y("/kontenabfrage")}}),r.a.createElement(de,{active:!0,text:"\u21a9 : Kontensaldo",type:"submit"})),r.a.createElement(Y,null),m?r.a.createElement(Z,null):s?r.a.createElement(ee,null):i&&i.length<1?r.a.createElement(X,null,"Keine Buchungen gefunden"):r.a.createElement(W,null,r.a.createElement(Te,{attributes:[{name:"Beleg",selector:function(e){return e.pos}},{name:"Buchung",date:!0,selector:function(e){return e.accountedDate}},{name:"Haben",summarize:"H",number:!0,suffix:"H",selector:function(e){return 0!==e.debit&&e.debit}},{name:"Soll",summarize:"S",number:!0,suffix:"S",selector:function(e){return 0!==e.credit&&e.credit}},{name:"Buchungstext",expressive:!0,selector:function(e){return e.text}},{name:"Gegen",selector:function(e){return e.gegen}}],values:i,keySelector:function(e){return e.pos},accountingSummary:!0})))};var ht=function(){var e=Object(l.g)(),t=e.url,n=e.param;return r.a.createElement(l.a,{to:"/"+t+"/"+n})};var Ot=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null,r.a.createElement("form",{onSubmit:e.onSubmit},"editing...")),r.a.createElement(ve,{cancel:e.cancel}))};var jt=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],c=void 0===n,u=!c;return E()((function(){return r(void 0)}),{detectKeys:[27]}),{recordTemplate:n,setRecordTemplate:r,selectMode:c,editMode:u}},xt=function(e){return e.konto_nr};var yt=function(){var e=Qe("/account-plan-atts"),t=e.result,n=e.loading,c=e.error,u=Qe("/account-plan"),o=u.result,l=u.loading,i=u.error,m=Object.keys(o||{}).map((function(e){return o[e]})),s=Object(a.useState)(""),f=Object(b.a)(s,2),d=f[0],v=f[1],E=jt(),g=E.editMode,p=E.selectMode,h=E.recordTemplate,O=E.setRecordTemplate,j=function(e){return O(o[e])};return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{middle:!0},"Konten"),p&&r.a.createElement(Ee,{value:d,onChange:v,autoFocus:!0,newRecordButtonText:"neues Konto",label:"Kontennr.:",onSubmit:function(){return j(d)}}),g&&r.a.createElement(Ot,{defaultValues:h}),r.a.createElement(Y,null),l||n?r.a.createElement(Z,null):i||c?r.a.createElement(ee,null):r.a.createElement(W,null,r.a.createElement(Te,{attributes:t.map((function(e){return e.toLowerCase()})).map((function(e){return{name:e,selector:function(t){return t[e]}}})),keySelector:function(e){return e.konto_nr},values:m,onRowClick:function(e){return j(xt(e))}})))};var St=function(){var e=Qe("/guv"),t=e.result,n=e.loading,c=e.error,u=Object(d.c)();Object(a.useEffect)((function(){return c&&u.error("Konnte GuV nicht vom Server laden")}),[c]);var o=Object(a.useState)(!1),i=Object(b.a)(o,2),m=i[0],s=i[1];if(E()((function(){return s("/")}),{detectKeys:[27]}),m)return r.a.createElement(l.a,{to:m});var f=t?Object.keys(t.ertraege||{}):[];f.sort((function(e,t){return e===t?0:e>t?1:-1}));var v=[],g=0;return f.forEach((function(e){var n=t.aufwendungen[e],a=t.ertraege[e],r=a-n;g=r+g,v.push({month:e,ertrag:a,aufwand:n,gewinn:r,accumulated:g})})),r.a.createElement(r.a.Fragment,null,r.a.createElement($,null,r.a.createElement(X,null,"Gewinn und Verlustrechnung")),r.a.createElement(be,null,r.a.createElement(de,{active:!0,text:"ESC: Hauptmenue",command:function(){return s("/")}})),r.a.createElement(Y,null),n?r.a.createElement(Z,null):r.a.createElement(W,null,r.a.createElement(Te,{accountingSummary:!0,attributes:[{name:"Monat",selector:function(e){return e.month},date:!0},{name:"Aufwendungen",summarize:"S",selector:function(e){return e.aufwand},number:!0,suffix:"S"},{name:"Ertraege",summarize:"H",selector:function(e){return e.ertrag},number:!0,suffix:"H"},{name:"Gewinn",selector:function(e){return e.gewinn},number:!0,creditDebitSuffix:!0,customFooter:v.reduce((function(e,t){return t.gewinn+e}),0)},{name:"Akkumuliert",selector:function(e){return e.accumulated},number:!0,creditDebitSuffix:!0,customFooter:g}],values:v,keySelector:function(e){return e.month}})))};var wt=function(){return r.a.createElement(i.a,{theme:s},r.a.createElement(o.a,null,r.a.createElement(J,null,r.a.createElement(q,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/laufende-buchung"},r.a.createElement(lt,null)),r.a.createElement(l.b,{path:"/reload/:url/:param"},r.a.createElement(ht,null)),r.a.createElement(l.b,{path:"/kontenabfrage"},r.a.createElement(gt,null)),r.a.createElement(l.b,{path:"/konten-saldo/:accountNo"},r.a.createElement(pt,null)),r.a.createElement(l.b,{path:"/konten-saldo"},r.a.createElement(pt,null)),r.a.createElement(l.b,{path:"/guv"},r.a.createElement(St,null)),r.a.createElement(l.b,{path:"/accounts"},r.a.createElement(yt,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(dt,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=n(32),Kt={timeout:5e3,position:d.b.BOTTOM_CENTER};u.a.render(r.a.createElement((function(){return r.a.createElement(d.a,Object.assign({template:kt.a},Kt),r.a.createElement(wt,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.8a659439.chunk.js.map