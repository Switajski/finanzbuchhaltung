(this.webpackJsonpfinanzbuchhaltung=this.webpackJsonpfinanzbuchhaltung||[]).push([[0],{27:function(e){e.exports=JSON.parse('{"name":"finanzbuchhaltung","version":"2.1.8","private":false,"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","react":"^16.10.2","react-alert":"^5.5.0","react-alert-template-basic":"^1.0.0","react-dom":"^16.10.2","react-hook-form":"^3.27.0","react-router-dom":"^5.1.2","react-scripts":"3.2.0","react-transition-group":"^4.2.1","styled-components":"^4.3.0","use-key-hook":"^1.5.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build ","postbuild":"rm -rf ../resources/public && mv build ../resources/public","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"proxy":"http://localhost:4000"}')},36:function(e,t,n){e.exports=n(54)},41:function(e,t,n){},42:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),u=n.n(c),o=(n(41),n(14)),l=n(17),i=n(2),s="rgb(7,1,126)",m={background:s,font:"rgb(179,179,179);",variable:s,variableBg:"rgb(0,110,107)",active:s,activeBg:"rgb(179,179,179);",minor:"#5a5a5a",emphasize:"rgb(253,255,0)",header:"white"},f=(n(42),n(8)),b=n(1),d=n(10),v=n(12),p=n.n(v),E=n(4),g=n.n(E),h=n(16),O=n(7);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){return parseInt(e.pos)},w=function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.statusText+" at "+e.url);return e.json()}))};var S=function(e){var t=Object(r.useState)(new Map),n=Object(b.a)(t,2),a=n[0],c=n[1],u=Object(r.useState)([]),o=Object(b.a)(u,2),l=o[0],i=o[1],s=Object(r.useState)(!1),m=Object(b.a)(s,2),f=m[0],d=m[1];return Object(r.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,w("/accounting-records");case 4:t=e.sent,n=t.slice(1).sort((function(e,t){return x(t)-x(e)})).reduce((function(e,t){return e.set(x(t),t),e}),new Map),d(!1),c(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),d(!1),i([].concat(Object(h.a)(l),[e.t0]));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[].concat(Object(h.a)(e),[l])),{accountingRecords:a,arMessages:l,saveAccountingRecord:function(e){(function(){var t=Object(O.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.has(x(e))?"/update-record":"/create-record",t.next=4,w(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y({},e))});case 4:i([].concat(Object(h.a)(l),[(r="Buchung erfolgreich gespeichert",{title:"success",message:r})])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i([].concat(Object(h.a)(l),[t.t0]));case 10:case"end":return t.stop()}var r}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()},loading:f}},k=n(3),K=n(27);function P(){var e=Object(k.a)(["height: 100%;\ndisplay: flex;\nalign-items: center;\njustify-content: center;"]);return P=function(){return e},e}function D(){var e=Object(k.a)(["align-self:center; text-align:center;"]);return D=function(){return e},e}function F(){var e=Object(k.a)(["flex: 1 1 auto;"]);return F=function(){return e},e}function z(){var e=Object(k.a)(["\ndisplay:flex;\njustify-content: space-between;"]);return z=function(){return e},e}function B(){var e=Object(k.a)(["white-space:nowrap;"]);return B=function(){return e},e}function C(){var e=Object(k.a)(["\npadding: 5px 20px 5px 20px;"]);return C=function(){return e},e}function M(){var e=Object(k.a)(["\nmargin:0;\nborder:0.5px solid;"]);return M=function(){return e},e}function A(){var e=Object(k.a)(["\noverflow:scroll;\npadding:0 20px 0 20px;\nflex-grow : 1;"]);return A=function(){return e},e}function R(){var e=Object(k.a)(["\nheight: 100%;\ndisplay: flex;\nflex-flow: column;\noverflow:hidden;\n@media not print {border: 1px solid;}"]);return R=function(){return e},e}function H(){var e=Object(k.a)(["\n@media not print {\n    height: 95vh;\n}\ndisplay: block;\nmax-width: 1000px;\nmargin-left:auto;\nmargin-right:auto;\nmargin-top: 1em;"]);return H=function(){return e},e}function T(){var e=Object(k.a)(["\ntext-transform: uppercase"]);return T=function(){return e},e}function N(){var e=Object(k.a)(["\ncolor: ",""]);return N=function(){return e},e}function _(){var e=Object(k.a)(["visibility:hidden;"]);return _=function(){return e},e}function L(){var e=Object(k.a)(["\n@media not print {\n    color: ","\n}"]);return L=function(){return e},e}function V(){var e=Object(k.a)(["\nbackground-color: ",";\ncolor: ",";\nborder: 0;\n:hover {\n    color: ","\n}\n:active {\n    color: ","\n}"]);return V=function(){return e},e}function G(){var e=Object(k.a)(["\nbackground-color: ",";\ncolor: ",";"]);return G=function(){return e},e}i.b.span(G(),(function(e){return e.theme.variableBg}),(function(e){return e.theme.header}));var I=i.b.button(V(),(function(e){return e.theme.variableBg}),(function(e){return e.active?e.theme.header:e.theme.brightGrey}),(function(e){return e.theme.emphasize}),(function(e){return e.theme.active})),J=i.b.span(L(),(function(e){return e.theme.emphasize})),q=i.b.span(_()),W=function(e){var t=e.size;return a.a.createElement(q,null,Array.from(new Array(t),(function(){return"x"})).map((function(){return"x"})))},Y=i.b.span(N(),(function(e){return e.theme.minor})),U=i.b.p(T()),$=i.b.div(H()),Q=i.b.div(R()),X=i.b.div(A()),Z=i.b.hr(M()),ee=i.b.div(C()),te=i.b.span(B()),ne=i.b.div(z()),re=i.b.div(F()),ae=i.b.div(D());function ce(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ne,null,a.a.createElement(ae,null,"FIBU ",K.version),e.right&&a.a.createElement(re,null),a.a.createElement("div",e,e.children),!e.right&&a.a.createElement("div",null)),a.a.createElement(Z,null))}function ue(){return a.a.createElement(a.a.Fragment,null,"\xa0 \xa0")}var oe=i.b.div(P());function le(){return a.a.createElement(oe,null,a.a.createElement(J,null,"laedt..."))}function ie(){return a.a.createElement(oe,null,a.a.createElement(J,null,"Konnte Daten aufgrund eines Serverfehlers nicht laden"))}function se(){var e=Object(k.a)(["\nmargin-right: 7px;"]);return se=function(){return e},e}function me(){var e=Object(k.a)(["\ncolor: ",";\nbackground-color: ",";\nborder: none;\n&:focus {\n    color: ",";\n    background-color: ",";\n    border:none;\n}"]);return me=function(){return e},e}function fe(){var e=Object(k.a)(["\nwhite-space: nowrap;"]);return fe=function(){return e},e}function be(){var e=Object(k.a)(["\nfont-size:smaller;"]);return be=function(){return e},e}var de=i.b.span(be()),ve=i.b.span(fe()),pe=i.b.input(me(),(function(e){return e.theme.variable}),(function(e){return e.theme.variableBg}),(function(e){return e.theme.active}),(function(e){return e.theme.activeBg}));pe.defaultProps={theme:{inputBg:"white",input:"black"}};var Ee=i.b.label(se()),ge=function(e){return a.a.createElement(ve,null,a.a.createElement(J,null,"\u26a0 ",a.a.createElement(de,null,e.text)))};var he=Object(r.forwardRef)((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee,null,a.a.createElement(ve,null,e.label)),a.a.createElement(pe,Object.assign({},e,{ref:t})))}));function Oe(){var e=Object(k.a)(["\n  display: flex;\n  align-content: flex-end;\n  justify-content: space-between;\n  @media print {\n    display: none;\n  }\n"]);return Oe=function(){return e},e}function je(){var e=Object(k.a)(["\n  width: 100%;\n  font-size: 1em;\n"]);return je=function(){return e},e}var ye=Object(i.b)(I)(je()),xe=i.b.div(Oe());function we(e){return a.a.createElement(xe,{columns:5},e.children)}function Se(e){return a.a.createElement("div",null,e.active&&a.a.createElement(ye,Object.assign({type:e.submit?"submit":"button"},e,{onClick:e.command}),e.symbol&&e.symbol,e.text))}function ke(e){return a.a.createElement(we,null,a.a.createElement(Se,{active:!0,type:"reset",command:e.cancel,key:"ESC",text:"ESC: Abbrechen"}),a.a.createElement(Se,{active:!0,text:"\u21b9 : naechstes Feld"}),a.a.createElement(Se,{active:!0,text:"\u21a9 : speichern",type:"submit"}))}var Ke=function(e){var t=Object(r.useState)(!1),n=Object(b.a)(t,2),c=n[0],u=n[1];return p()((function(){return u(!0)}),{detectKeys:[27]}),c?a.a.createElement(l.a,{to:"/"}):a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},a.a.createElement(ee,null,a.a.createElement(ne,null,a.a.createElement("div",null,a.a.createElement(he,Object.assign({},e,{type:"number",style:{width:"50px"},min:"1",onChange:function(t){return e.onChange(t.target.value)}}))))),a.a.createElement(we,null,a.a.createElement(Se,{active:!0,text:"ESC: Hauptmenue",command:function(){return u(!0)}}),a.a.createElement(Se,{active:!0,text:" : "+e.newRecordButtonText,symbol:"\u21a9",command:function(){return e.onSubmit()}})))},Pe=n(35);function De(){var e=Object(k.a)(["",""]);return De=function(){return e},e}function Fe(){var e=Object(k.a)(["text-align:right;"]);return Fe=function(){return e},e}function ze(){var e=Object(k.a)(["text-align:right;"]);return ze=function(){return e},e}var Be=i.b.th(ze()),Ce=function(e){return e&&parseFloat(Math.round(100*e)/100).toFixed(2)},Me=i.b.td(Fe()),Ae=function(e){return e.th?a.a.createElement(Be,e):a.a.createElement(Me,e)},Re=function(e){var t=e.children;return a.a.createElement(a.a.Fragment,null,"\xa0",t)},He=i.b.span(De(),(function(e){return e.value%1===0&&"padding-right: 1.85em;"})),Te=function(e){var t=e.children,n=e.th,r=e.creditDebitSuffix,c=e.suffix,u=t;if(void 0===u)return a.a.createElement(Ae,{th:n});if(Ce(u)===Ce(0))return a.a.createElement(Ae,{th:n},"0",(r||c)&&a.a.createElement(a.a.Fragment,null,"\xa0\xa0"));var o=u<0,l=(r?function(e){return e<0?-e:e}(u):u).toLocaleString();return a.a.createElement(Ae,{th:n},u&&a.a.createElement(a.a.Fragment,null,a.a.createElement(He,{value:u},function(e){return 10*e%1===0&&e%1!==0}(u)?l+"0":l),c&&a.a.createElement(Re,null,c),r&&a.a.createElement(Re,null,o?"S":"H")))};function Ne(){var e=Object(k.a)(["\n    text-align:",";"]);return Ne=function(){return e},e}function _e(){var e=Object(k.a)(["\n",""]);return _e=function(){return e},e}function Le(){var e=Object(k.a)(["\n  width: 100%;\n  border-collapse:collapse;\n  @media print {\n      td {\n        border-bottom: 1px dotted;\n      }\n  }\n  th, td {\n    margin: 0;\n    padding: 3px 5px 3px 3px;\n  }\n  tr:nth-child(even) {\n      background-color: #06025e;\n  }\n  thead th {\n    border-bottom: 1px solid;\n  }\n  tfoot th {\n    border-top: 1px solid;\n  }"]);return Le=function(){return e},e}function Ve(){var e=Object(k.a)(["white-space: nowrap;"]);return Ve=function(){return e},e}var Ge=i.b.td(Ve()),Ie=function(e){e.selector;var t=Object(Pe.a)(e,["selector"]);return e.number?a.a.createElement(Te,t):e.date?a.a.createElement(Ge,t):a.a.createElement("td",t)},Je=i.b.table(Le()),qe=i.b.tr(_e(),(function(e){return e.link&&"\ncursor:pointer;\n&:hover {\n    background-color:"+e.theme.variableBg+" !important;\n    color:"+e.theme.active+";\n}\n"})),We=i.b.th(Ne(),(function(e){return e.alignRight?"right":"left"}));var Ye=function(e){return a.a.createElement(Je,{cellspacing:"0",cellpadding:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,e.attributes.map((function(e){return a.a.createElement(We,{alignRight:e.number,number:e.number,key:e.name},e.name)})))),a.a.createElement("tbody",null,e.values&&e.values.map((function(t){return a.a.createElement(qe,{link:e.onRowClick,onClick:function(){return e.onRowClick&&e.onRowClick(t)},key:e.keySelector(t)},e.attributes.map((function(e,n){return a.a.createElement(Ie,Object.assign({},e,{key:n}),e.selector(t))})))}))),e.accountingSummary&&e.values&&a.a.createElement("tfoot",null,a.a.createElement("tr",null,e.attributes.map((function(t){var n=t.name;return t.customFooter?a.a.createElement(Te,{th:!0,creditDebitSuffix:!0,key:n},t.customFooter):t.summarize?a.a.createElement(Te,{th:!0,suffix:t.summarize,key:n},e.values.reduce((function(e,n){return e+t.selector(n)}),0)):t.expressive?a.a.createElement(Te,{th:!0,creditDebitSuffix:!0},e.values.reduce((function(e,t){return e+t.debit-t.credit}),0)):a.a.createElement(Te,{th:!0,key:n})})))),e.children)},Ue=n(20);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qe=function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new Error(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:e.status,status:e.status,message:e.statusText,url:e.url}));return e.json()}))},Xe=function(){var e=Object(O.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe("/balance?accountNo="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(e){var t=e.accountPlan,n=e.debitAccount,a=e.creditAccount,c=Object(r.useState)(!1),u=Object(b.a)(c,2),o=u[0],l=u[1],i=Object(r.useState)(),s=Object(b.a)(i,2),m=s[0],f=s[1],d=Object(r.useState)(),v=Object(b.a)(d,2),p=v[0],E=v[1];return Object(r.useEffect)((function(){(function(){var e=Object(O.a)(g.a.mark((function e(){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[n]){e.next=8;break}return e.next=4,Xe(n);case 4:r=e.sent,f(r.sum),e.next=9;break;case 8:f(void 0);case 9:if(!t[a]){e.next=16;break}return e.next=12,Xe(a);case 12:c=e.sent,E(c.sum),e.next=17;break;case 16:E(void 0);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),l(!0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[t,n,a]),[{creditBalance:p,debitBalance:m},o]};function et(){var e=Object(k.a)(["\n",""]);return et=function(){return e},e}var tt=Object(i.b)(he)(et(),(function(e){return e.emphasize&&"background-color:"+e.theme.emphasize+";"}));var nt=Object(r.forwardRef)((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement(tt,Object.assign({},e,{ref:t,emphasize:e.validationMsg})),e.validationMsg&&a.a.createElement(ge,{text:e.validationMsg.message}))}));function rt(){var e=Object(k.a)(["\ntext-align:right;"]);return rt=function(){return e},e}var at=Object(i.b)(tt)(rt());var ct=Object(r.forwardRef)((function(e,t){return a.a.createElement(at,Object.assign({},e,{emphasize:e.validationMsg,ref:t,type:"number",step:"any"}))}));var ut=Object(r.forwardRef)((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement(tt,Object.assign({rows:1},e,{emphasize:e.validationMsg,ref:t,placeholder:"dd.mm.yyyy",value:e.value,type:"date"})),e.validationMsg&&a.a.createElement(ge,{text:e.validationMsg.message}))}));function ot(){var e=Object(k.a)(["margin-left: 5px;"]);return ot=function(){return e},e}var lt=i.b.span(ot());var it=Object(r.forwardRef)((function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement(tt,Object.assign({size:7},e,{emphasize:e.validationMsg,ref:t,list:e.name})),a.a.createElement("datalist",{id:e.name},e.options.map((function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.value," - ",e.name)}))),e.validationMsg&&a.a.createElement(lt,null,a.a.createElement(ge,{text:e.validationMsg.message})))}));function st(e){var t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1],u=Object(r.useState)(!0),o=Object(b.a)(u,2),l=o[0],i=o[1],s=Object(r.useState)(),m=Object(b.a)(s,2),f=m[0],d=m[1];return Object(r.useEffect)((function(){i(!0),function(){var t=Object(O.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e).then((function(e){if(!e.ok)throw new Error(e.statusText+" at "+e.url);return e.json()}));case 3:n=t.sent,i(!1),c(n),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),i(!1),d(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),{result:a,error:f,loading:l}}var mt=function(){return st("/account-plan-meta")},ft=function(){return st("/account-plan")},bt=st;function dt(){var e=Object(k.a)(["white-space: nowrap;"]);return dt=function(){return e},e}function vt(){var e=Object(k.a)(["text-align:right;"]);return vt=function(){return e},e}function pt(){var e=Object(k.a)(["\ndisplay:flex;\njustify-content: flex-start;"]);return pt=function(){return e},e}function Et(){var e=Object(k.a)(["\ndisplay:flex;\njustify-content: space-between;"]);return Et=function(){return e},e}var gt=i.b.div(Et()),ht=i.b.div(pt()),Ot="Konto ex. nicht",jt="Datum ex. nicht",yt="Steuerschl. ex. nicht",xt="Keinen Text eingegeben",wt="Keinen Betrag eingegeben",St=function(e){return isNaN(Date.parse(e))},kt=i.b.div(vt()),Kt=i.b.span(dt()),Pt=function(e){var t=e.value;return a.a.createElement(a.a.Fragment,null,"Saldo ",a.a.createElement(Kt,null,(t<0?-t:t).toLocaleString()," ",t<0?"S":"H"," "))};var Dt=function(e){var t=e.defaultValues,n=e.onSubmit,c=e.pos,u=e.cancel,o=bt("/account-plan"),l=o.result,i=o.loading,s=o.error,m=Object.keys(l||{}).map((function(e){return{value:l[e].konto_nr,name:l[e].name_kont}})),f=bt("/taxes").result||[],d=Object(Ue.a)({defaultValues:t}),v=d.handleSubmit,p=d.register,E=d.errors,g=d.reset;Object(r.useEffect)((function(){return g(t)}),[t,g]);var h=Object(r.useState)(),O=Object(b.a)(h,2),j=O[0],y=O[1],x=Object(r.useState)(),w=Object(b.a)(x,2),S=w[0],k=w[1],K=Ze({accountPlan:l,debitAccount:S,creditAccount:j}),P=Object(b.a)(K,1)[0],D=P.creditBalance,F=P.debitBalance,z=f.map((function(e){return e.fasuch}));return s?a.a.createElement("p",null,"Konnte Buchungsplan nicht vom Server laden."):i?a.a.createElement(le,null):a.a.createElement("form",{onSubmit:v(n)},a.a.createElement(ee,null,a.a.createElement(gt,null,a.a.createElement("div",null,a.a.createElement(he,{name:"pos",label:"Pos.",size:6,readOnly:!0,value:c,ref:p})),a.a.createElement("div",null,a.a.createElement(ut,{name:"date",label:"Datum",autoFocus:!0,ref:p({validate:function(e){return!St(e)||jt}}),validationMsg:E.date})),a.a.createElement("div",null,a.a.createElement(ut,{name:"accountedDate",label:"Buchungsdatum",ref:p({validate:function(e){return!St(e)||jt}}),validationMsg:E.accountedDate}),a.a.createElement("br",null))),a.a.createElement("br",null),a.a.createElement(gt,null,a.a.createElement("div",null,a.a.createElement(it,{name:"debitAccount",label:"Konto Soll\xa0\xa0",onChange:function(e){return k(e.target.value)},options:m,ref:p({validate:function(e){return l[e]||Ot}}),validationMsg:E.debitAccount})),void 0!==F&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(J,null,void 0!==F&&l[S]&&l[S].name_kont)),a.a.createElement(kt,null,a.a.createElement(J,null,void 0!==F&&a.a.createElement(Pt,{value:F}))))),a.a.createElement(gt,null,a.a.createElement("div",null,a.a.createElement(it,{name:"creditAccount",label:"Konto Haben\xa0",onChange:function(e){return y(e.target.value)},options:m,ref:p({validate:function(e){return l[e]||Ot}}),validationMsg:E.creditAccount})),void 0!==D&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(J,null,void 0!==D&&l[j].name_kont)),a.a.createElement(kt,null,a.a.createElement(J,null,void 0!==D&&a.a.createElement(Pt,{value:D}))))),a.a.createElement("br",null),a.a.createElement(ht,null,a.a.createElement("div",null,a.a.createElement(ct,{name:"sum",size:7,label:"Summe",ref:p({required:wt,min:0}),validationMsg:E.sum}),a.a.createElement(ue,null)),a.a.createElement("div",null,a.a.createElement(it,{size:7,name:"tax",label:"Steuerschl.",options:f.map((function(e){return{value:e.fasuch,name:e.fatext}})),ref:p({validate:function(e){return z.indexOf(e)>-1||yt}}),validationMsg:E.tax})),a.a.createElement("br",null)),a.a.createElement(nt,{name:"text",label:"Text\xa0",size:30,ref:p({required:xt}),validationMsg:E.text})),a.a.createElement(ke,{cancel:u}))};function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zt=function(e){return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())};var Bt=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],u=function(e){return c(parseInt(e))},o=S([x,!1]),l=o.accountingRecords,i=o.arMessages,s=o.saveAccountingRecord,m=o.loading,v=Object(r.useState)(),E=Object(b.a)(v,2),g=E[0],h=E[1],O=void 0===g,j=!O,y=function(){return h(void 0)};function w(e){if(e===l.keys().next().value+1){var t=l.size>0?l.values().next().value.date:zt(new Date);h({date:t,accountedDate:t})}else l.has(e)?(e!==n&&u(e),h(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l.get(e)))):k.info("Position ".concat(e," nicht erlaubt."))}p()((function(){return y()}),{detectKeys:[27]}),Object(r.useEffect)((function(){if(l.size>0){var e=l.values().next().value;u(x(e)+1)}}),[l,!1]);var k=Object(d.c)();return Object(r.useEffect)((function(){if(i&&i.length>0){var e=i[i.length-1];e instanceof Error?k.error(e.message):e.title&&"success"===e.title?(k.success(e.message),y(),console.log()):k.info(e.message)}}),[i]),a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,null,a.a.createElement(J,null,O?a.a.createElement(W,{size:11}):l.has(n)?"korrigiere ":a.a.createElement(a.a.Fragment,null,"neue ",a.a.createElement(W,{size:6}))),"\xa0laufende Buchung"),O&&a.a.createElement(Ke,{autoFocus:!0,newRecordButtonText:l.has(n)?"korrigiere":"neue Buchung",label:"Pos.",value:n,onSubmit:function(){return w(n)},onChange:u}),j&&a.a.createElement(Dt,{onSubmit:s,cancel:y,pos:n,defaultValues:g}),a.a.createElement(Z,null),m?a.a.createElement(le,null):a.a.createElement(X,null,a.a.createElement(Ye,{attributes:[{name:"Pos.",selector:function(e){return e.pos}},{name:"Datum",selector:function(e){return e.date},date:!0},{name:"Soll",selector:function(e){return e.debitAccount}},{name:"Haben",selector:function(e){return e.creditAccount}},{name:"Summe",selector:function(e){return e.sum},number:!0},{name:"Text",selector:function(e){return e.text}}],values:Array.from(l,(function(e){var t=Object(b.a)(e,2);t[0];return t[1]})),keySelector:x,onRowClick:function(e){return w(x(e))}})))};function Ct(){var e=Object(k.a)(["\n  margin-top: 15px;\n  display: flex;\n  height: 100%;\n  justify-content: space-evenly;\n"]);return Ct=function(){return e},e}var Mt=i.b.div(Ct()),At={2:"/accounts",6:"/kontenabfrage",7:"/konten-saldo",9:"/laufende-buchung",12:"/guv"};function Rt(e){return a.a.createElement("li",null,e.to?a.a.createElement(o.b,e):a.a.createElement(Y,null,e.children))}function Ht(e){var t=e.name,n=e.children,r=e.start,c=void 0===r?1:r;return a.a.createElement(a.a.Fragment,null,a.a.createElement(J,null,t),a.a.createElement("ol",{start:c},n))}var Tt=function(){var e=Object(r.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),o=Object(b.a)(u,2),i=o[0],s=o[1],m=Object(r.useState)(),f=Object(b.a)(m,2),v=f[0],p=f[1],E=Object(d.c)();return Object(r.useEffect)((function(){v&&E.error(v)}),[v]),n?a.a.createElement(l.a,{to:n}):a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,null,"Hauptmenue"),a.a.createElement(Mt,null,a.a.createElement("div",null,a.a.createElement(Ht,{name:"Stammdaten"},a.a.createElement(Rt,null,"Steuerschluessel"),a.a.createElement(Rt,null,"Konten"),a.a.createElement(Rt,null,"Reorganisation"),a.a.createElement(Rt,null,"Kontenbelegung")),a.a.createElement(Ht,{name:"Ausdruck",start:5},a.a.createElement(Rt,null,"Journal"),a.a.createElement(Rt,{to:At[6]},"Kontenabfrage"),a.a.createElement(Rt,{to:At[7]},"Konten - Saldo"),a.a.createElement(Rt,null,"Konten - Plan"))),a.a.createElement("div",null,a.a.createElement(Ht,{name:"Laufende Verarbeitung",start:9},a.a.createElement(Rt,{to:At[9]},"Laufende Buchung")),a.a.createElement(Ht,{name:"Offene-Posten-Auswertungen",start:10},a.a.createElement(Rt,null,"Kunde"),a.a.createElement(Rt,null,"Lieferant")),a.a.createElement(Ht,{name:"Abschluss, Auswertungen",start:12},a.a.createElement(Rt,{to:At[12]},"Gewinn und Verlust"),a.a.createElement(Rt,null,"Kontrollfunktion"),a.a.createElement(Rt,null,"Monatsabschluss")))),a.a.createElement(Mt,null,a.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),At[i]?c(At[i]):(s(""),p("ungueltige Menueauswahl"))}(e)}},a.a.createElement(he,{autoFocus:!0,label:"Ihre Auswahl",size:"2",value:i,onChange:function(e){return s(e.target.value)}}))))},Nt=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},_t=function(e,t){return"/account-overview?from=".concat(e,"&to=").concat(t)};var Lt=function(){var e=Object(r.useState)("2000-01-01"),t=Object(b.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(Nt(new Date)),o=Object(b.a)(u,2),i=o[0],s=o[1],m=Object(r.useState)(_t(n,i)),f=Object(b.a)(m,2),v=f[0],E=f[1],g=Object(r.useState)(),h=Object(b.a)(g,2),O=h[0],j=h[1];p()((function(){return j(!0)}),{detectKeys:[27]});var y=bt(v),x=y.result,w=y.loading,S=y.error,k=bt("/account-plan"),K=k.result,P=k.error,D=K||{},F=bt("/account-config"),z=F.result,B=F.acErrored,C=Object(d.c)();return Object(r.useEffect)((function(){S&&C.error("Konnte Kontenabfrage nicht vom Server laden"),P&&C.error("Konnte Kontenplan (konten.dbf) nicht vom Server laden"),B&&C.error("Konnte Kontenkonfiguration (account-config.edn) nicht vom Server laden")}),[S,P,B]),O?a.a.createElement(l.a,{to:O}):a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E(_t(n,i))}},a.a.createElement(ce,{join:!0},"Kontenabfrage",a.a.createElement(ut,{value:n,onChange:function(e){return c(e.target.value)},autoFocus:!0,name:"from",label:" von"}),"\xa0",a.a.createElement(te,null,a.a.createElement(ut,{value:i,onChange:function(e){return s(e.target.value)},name:"to",label:"bis"}))),a.a.createElement(we,null,a.a.createElement(Se,{active:!0,text:"ESC: Hauptmenue",command:function(){return j("/")}}),a.a.createElement(Se,{active:!0,text:"\u21a9 : anwenden",submit:!0}))),a.a.createElement(Z,null),w?a.a.createElement(le,null):S?a.a.createElement(ie,null):a.a.createElement(X,null,Object.keys(x||{}).map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(U,null,z?z.kklasse_name[e]:e),a.a.createElement(Ye,{accountingSummary:!0,attributes:[{name:"Konto",selector:function(e){return e.account}},{name:"Kontoname",selector:function(e){return D[e.account]?D[e.account].name_kont:e.account}},{name:"Haben",summarize:"H",suffix:"H",number:!0,selector:function(e){return 0!==e.debit&&e.debit}},{name:"Soll",summarize:"S",suffix:"S",number:!0,selector:function(e){return 0!==e.credit&&e.credit}},{name:"Saldo",expressive:!0,creditDebitSuffix:!0,number:!0,selector:function(e){return e.debit-e.credit}}],values:x[e],keySelector:function(e){return e.account},onRowClick:function(e){return j("/konten-saldo/"+e.account)}}))}))))};var Vt=function(){var e=Object(l.g)().accountNo,t=Object(r.useState)(e),n=Object(b.a)(t,2),c=n[0],u=n[1],o=bt("/account-expressive?accountNo="+e),i=o.result,s=o.loading,m=o.error,f=bt("/account-plan"),v=f.result,E=f.error,g=Object.keys(v||{}).map((function(e){return{value:v[e].konto_nr,name:v[e].name_kont}})),h=Object(d.c)();Object(r.useEffect)((function(){m&&h.error("Konnte Kontensaldo nicht vom Server laden"),E&&h.error("Konnte Kontenplan (konten.dbf) nicht vom Server laden")}),[m,E]);var O=Object(r.useState)(),j=Object(b.a)(O,2),y=j[0],x=j[1];return p()((function(){return x("/")}),{detectKeys:[27]}),y?a.a.createElement(l.a,{from:"/konten-saldo/"+c,to:y}):a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),x("/reload/konten-saldo/"+c)}},a.a.createElement(ce,null,a.a.createElement(oe,null,"Kontosaldo von"," ",v&&v[e]&&a.a.createElement(J,null,"\xa0",v[e].name_kont),a.a.createElement(it,{options:g,autoFocus:!0,name:"account",value:c,onChange:function(e){return u(e.target.value)}}))),a.a.createElement(we,null,a.a.createElement(Se,{active:!0,text:"ESC: Hauptmenue",command:function(){return x("/")}}),a.a.createElement(Se,{active:!0,text:"Kontenabfrage",command:function(){return x("/kontenabfrage")}}),a.a.createElement(Se,{active:!0,text:"\u21a9 : Kontensaldo",type:"submit"})),a.a.createElement(Z,null),s?a.a.createElement(le,null):m?a.a.createElement(ie,null):i&&i.length<1?a.a.createElement(oe,null,"Keine Buchungen gefunden"):a.a.createElement(X,null,a.a.createElement(Ye,{attributes:[{name:"Beleg",selector:function(e){return e.pos}},{name:"Buchung",date:!0,selector:function(e){return e.accountedDate}},{name:"Haben",summarize:"H",number:!0,suffix:"H",selector:function(e){return 0!==e.debit&&e.debit}},{name:"Soll",summarize:"S",number:!0,suffix:"S",selector:function(e){return 0!==e.credit&&e.credit}},{name:"Buchungstext",expressive:!0,selector:function(e){return e.text}},{name:"Gegen",selector:function(e){return e.gegen}}],values:i,keySelector:function(e){return e.pos},accountingSummary:!0})))};var Gt=function(){var e=Object(l.g)(),t=e.url,n=e.param;return a.a.createElement(l.a,{to:"/"+t+"/"+n})},It=function(e){return e.konto_nr};var Jt=function(){var e=mt(),t=e.result,n=e.loading,c=e.error,u=(t||[]).map((function(e){return e.name})),o=ft(),i=o.result,s=o.loading,m=o.error,f=Object.keys(i||{}).map((function(e){return i[e]})),d=Object(r.useState)(""),v=Object(b.a)(d,2),p=v[0],E=v[1],g=Object(r.useState)(),h=Object(b.a)(g,2),O=h[0],j=h[1],y=function(e){return j("account-form/"+e)};return O?a.a.createElement(l.a,{to:O}):a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,null,"Konten"),a.a.createElement(Ke,{value:p,onChange:E,autoFocus:!0,newRecordButtonText:"neues Konto",label:"Kontennr.:",onSubmit:function(){return y(p)}}),a.a.createElement(Z,null),s||n?a.a.createElement(le,null):m||c?a.a.createElement(ie,null):a.a.createElement(X,null,a.a.createElement(Ye,{attributes:(u||[]).map((function(e){return e.toLowerCase()})).map((function(e){return{name:e,selector:function(t){return t[e]}}})),keySelector:function(e){return e.konto_nr},values:f,onRowClick:function(e){return y(It(e))}})))};var qt=function(){var e=bt("/guv"),t=e.result,n=e.loading,c=e.error,u=Object(d.c)();Object(r.useEffect)((function(){return c&&u.error("Konnte GuV nicht vom Server laden")}),[c]);var o=Object(r.useState)(!1),i=Object(b.a)(o,2),s=i[0],m=i[1];if(p()((function(){return m("/")}),{detectKeys:[27]}),s)return a.a.createElement(l.a,{to:s});var f=t?Object.keys(t.ertraege||{}):[];f.sort((function(e,t){return e===t?0:e>t?1:-1}));var v=[],E=0;return f.forEach((function(e){var n=t.aufwendungen[e],r=t.ertraege[e],a=r-n;E=a+E,v.push({month:e,ertrag:r,aufwand:n,gewinn:a,accumulated:E})})),a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,null,a.a.createElement(oe,null,"Gewinn und Verlustrechnung")),a.a.createElement(we,null,a.a.createElement(Se,{active:!0,text:"ESC: Hauptmenue",command:function(){return m("/")}})),a.a.createElement(Z,null),n?a.a.createElement(le,null):a.a.createElement(X,null,a.a.createElement(Ye,{accountingSummary:!0,attributes:[{name:"Monat",selector:function(e){return e.month},date:!0},{name:"Aufwendungen",summarize:"S",selector:function(e){return e.aufwand},number:!0,suffix:"S"},{name:"Ertraege",summarize:"H",selector:function(e){return e.ertrag},number:!0,suffix:"H"},{name:"Gewinn",selector:function(e){return e.gewinn},number:!0,creditDebitSuffix:!0,customFooter:v.reduce((function(e,t){return t.gewinn+e}),0)},{name:"Akkumuliert",selector:function(e){return e.accumulated},number:!0,creditDebitSuffix:!0,customFooter:E}],values:v,keySelector:function(e){return e.month}})))};function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(){var e=Object(k.a)([""]);return Yt=function(){return e},e}function Ut(){var e=Object(k.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n"]);return Ut=function(){return e},e}var $t=i.b.div(Ut()),Qt=i.b.div(Yt()),Xt=function(e){switch(e){case"\\C":return"text";case"\\N":return"number";case"\\D":return"date";case"\\L":return"checkbox";default:return"text"}},Zt="/accounts";var en=function(){var e=Object(r.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],u=mt(),o=u.result,i=(u.loading,u.error,(o||[]).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:e.name.toLowerCase()})}))),s=Object(l.g)().accountNo,m=bt("/account?accountNo="+s).result,d=Object(Ue.a)({defaultValues:m}),v=d.handleSubmit,E=d.register,g=d.errors,h=d.reset;return Object(r.useEffect)((function(){return h(m)}),[m,h]),p()((function(){return c(Zt)}),{detectKeys:[27]}),n?a.a.createElement(l.a,{to:n}):a.a.createElement("form",{onSubmit:v((function(e){console.log("submitting...",e),e.preventDefault()}))},a.a.createElement(ce,null,"Konten"),a.a.createElement(ee,null,a.a.createElement($t,null,(i||[]).map((function(e,t){return a.a.createElement(Qt,{key:e.name},a.a.createElement(he,{autoFocus:0===t,label:e.name,name:e.name,size:e.length,type:Xt(e.type),ref:E({validate:function(t){return(t+"").length>e.length||"wert zu lang"}}),validationMsg:g[e.name]}))})))),a.a.createElement(ke,{cancel:function(){return c(Zt)}}))};var tn=function(){return a.a.createElement(i.a,{theme:m},a.a.createElement(o.a,null,a.a.createElement($,null,a.a.createElement(Q,null,a.a.createElement(l.d,null,a.a.createElement(l.b,{path:"/laufende-buchung"},a.a.createElement(Bt,null)),a.a.createElement(l.b,{path:"/reload/:url/:param"},a.a.createElement(Gt,null)),a.a.createElement(l.b,{path:"/kontenabfrage"},a.a.createElement(Lt,null)),a.a.createElement(l.b,{path:"/konten-saldo/:accountNo"},a.a.createElement(Vt,null)),a.a.createElement(l.b,{path:"/konten-saldo"},a.a.createElement(Vt,null)),a.a.createElement(l.b,{path:"/guv"},a.a.createElement(qt,null)),a.a.createElement(l.b,{path:"/accounts"},a.a.createElement(Jt,null)),a.a.createElement(l.b,{path:"/account-form/:accountNo"},a.a.createElement(en,null)),a.a.createElement(l.b,{path:"/"},a.a.createElement(Tt,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nn=n(32),rn={timeout:5e3,position:d.b.BOTTOM_CENTER};u.a.render(a.a.createElement((function(){return a.a.createElement(d.a,Object.assign({template:nn.a},rn),a.a.createElement(tn,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.00ea82ef.chunk.js.map